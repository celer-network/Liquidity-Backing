{"version":3,"sources":["utils/unit.js","utils/liba.js","components/liba/auction-form.js","routes/liba.js"],"names":["__webpack_require__","d","__webpack_exports__","getUnitByAddress","formatCurrencyValue","formatCelrValue","lodash__WEBPACK_IMPORTED_MODULE_0__","lodash__WEBPACK_IMPORTED_MODULE_0___default","n","web3__WEBPACK_IMPORTED_MODULE_1__","web3__WEBPACK_IMPORTED_MODULE_1___default","supportedTokens","address","token","_","find","supportedToken","symbol","value","unit","toNumber","concat","web3","utils","fromWei","BN","BID","REVEAL","CLAIM","CHALLENGE","FINALIZE","FINALIZED","EXPIRED","getCurrentPeriod","network","auction","auctionPeriods","blockNumber","get","auctionPeriod","args","_$get","bidEnd","revealEnd","claimEnd","challengeEnd","finalizeEnd","finalized","getWinners","bids","result","remainingValue","sort","compareBid","forEach","bid","bidder","Object","_Users_zhuxuefeng_mygit_celer_cEconomy_web_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","push","calculateRepay","winners","_bid$value","rate","includes","add","muln","parseInt","divn","console","log","toString","bid1","bid2","_bid1$value","rate1","celerValue1","_bid2$value","rate2","celerValue2","AuctionForm","props","context","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleValueChange","changedValue","setState","handleInitAuction","onClose","form","current","validateFields","err","values","bidDuration","revealDuration","claimDuration","challengeDuration","finalizeDuration","duration","maxRate","minValue","collateralAddress","_values$collateralVal","collateralValue","contracts","LiBA","methods","initAuction","cacheSend","toWei","state","React","createRef","drizzle","_this$props","visible","supportedTokenOptions","map","formItems","name","field","fieldOptions","options","placeholder","rules","message","required","objectSpread","currencyFieldOptions","minValueRule","label","rateFieldOptions","blockFieldOptions","react_default","a","createElement","modal","title","onOk","onCancel","components_form","ref","items","onValuesChange","Component","contextTypes","PropTypes","object","tabList","key","tab","onTabChange","toggleModal","prevState","isModalVisible","renderAuction","_auction$value","asker","tokenAddress","list","Item","card","actions","router","to","icon","type","row","col","span","statistic","getAuctionPeriod","renderAuctions","_this$props2","accounts","data","getAuction","filter","grid","gutter","column","dataSource","renderItem","_this$state","activeTabKey","extra","es_button","onClick","auction_form","drizzleConnect"],"mappings":"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","file":"static/js/7.ab0f2117.chunk.js","sourcesContent":["import _ from 'lodash';\nimport web3 from 'web3';\n\nimport './network';\n\nexport const getUnitByAddress = (supportedTokens, address) => {\n    const token = _.find(\n        supportedTokens,\n        supportedToken => supportedToken.address === address\n    );\n\n    if (!token) {\n        return '';\n    }\n    return token.symbol;\n};\n\nexport const formatCurrencyValue = (value, unit) => {\n    const num = _.toNumber(value);\n\n    if (num < 100000) {\n        return `${value} wei`;\n    }\n\n    return `${web3.utils.fromWei(value)} ${unit}`;\n};\n\nexport const formatCelrValue = value => {\n    return formatCurrencyValue(value, 'CELR');\n};\n","import _ from 'lodash';\nimport web3 from 'web3';\n\nconst { BN } = web3.utils;\n\nexport const BID = 'Bid';\nexport const REVEAL = 'Reveal';\nexport const CLAIM = 'Claim';\nexport const CHALLENGE = 'Challenge';\nexport const FINALIZE = 'Finalize';\nexport const FINALIZED = 'Finalized';\nexport const EXPIRED = 'Expired';\nexport const UNKNOWN = 'Unknown';\n\nexport const getCurrentPeriod = (network, auction, auctionPeriods) => {\n    const blockNumber = _.get(network, 'block.number');\n    const auctionPeriod = _.find(\n        auctionPeriods,\n        auctionPeriod => auctionPeriod.args[0] === auction.args[0]\n    );\n    const {\n        bidEnd,\n        revealEnd,\n        claimEnd,\n        challengeEnd,\n        finalizeEnd,\n        finalized\n    } = _.get(auctionPeriod, 'value', {});\n\n    if (blockNumber < _.toNumber(bidEnd)) {\n        return BID;\n    }\n\n    if (blockNumber < _.toNumber(revealEnd)) {\n        return REVEAL;\n    }\n\n    if (blockNumber < _.toNumber(claimEnd)) {\n        return CLAIM;\n    }\n\n    if (blockNumber < _.toNumber(challengeEnd)) {\n        return CHALLENGE;\n    }\n\n    if (blockNumber < _.toNumber(finalizeEnd)) {\n        return FINALIZE;\n    }\n\n    if (finalized) {\n        return FINALIZED;\n    }\n\n    return EXPIRED;\n};\n\nexport const getWinners = (auction, bids) => {\n    const result = [];\n    let remainingValue = auction.value.value;\n    bids.sort(compareBid);\n\n    _.forEach(bids, bid => {\n        const [bidder] = bid.args;\n        const { value } = bid.value;\n\n        remainingValue -= value;\n        result.push(bidder);\n\n        if (remainingValue < 0) {\n            return false;\n        }\n    });\n\n    return result;\n};\n\nexport const calculateRepay = (bids, winners) => {\n    let result = new BN(0);\n\n    _.forEach(bids, bid => {\n        const [bidder] = bid.args;\n        const { value, rate } = bid.value;\n\n        if (!_.includes(winners, bidder)) {\n            return;\n        }\n\n        result = result.add(new BN(value).muln(100 + parseInt(rate)).divn(100));\n        console.log(rate, result.toString());\n    });\n\n    return result;\n};\n\nconst compareBid = (bid1, bid2) => {\n    const { rate1, celerValue1 } = bid1.value;\n    const { rate2, celerValue2 } = bid2.value;\n\n    if (rate1 !== rate2) {\n        return rate1 - rate2;\n    }\n\n    return celerValue2 - celerValue1;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport web3 from 'web3';\nimport { Modal } from 'antd';\n\nimport Form from '../form';\nimport {\n    currencyFieldOptions,\n    rateFieldOptions,\n    minValueRule,\n    blockFieldOptions\n} from '../../utils/form';\nimport { getUnitByAddress } from '../../utils/unit';\n\nclass AuctionForm extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = {};\n        this.form = React.createRef();\n        this.contracts = context.drizzle.contracts;\n    }\n\n    handleValueChange = changedValue => this.setState(changedValue);\n\n    handleInitAuction = () => {\n        const { onClose } = this.props;\n\n        this.form.current.validateFields((err, values) => {\n            if (err) {\n                return;\n            }\n\n            const {\n                token,\n                bidDuration,\n                revealDuration,\n                claimDuration,\n                challengeDuration,\n                finalizeDuration,\n                value,\n                duration,\n                maxRate,\n                minValue,\n                collateralAddress,\n                collateralValue = 0\n            } = values;\n\n            this.contracts.LiBA.methods.initAuction.cacheSend(\n                token,\n                bidDuration,\n                revealDuration,\n                claimDuration,\n                challengeDuration,\n                finalizeDuration,\n                web3.utils.toWei(value.toString(), 'ether'),\n                duration,\n                maxRate,\n                web3.utils.toWei(minValue.toString(), 'ether'),\n                collateralAddress,\n                web3.utils.toWei(collateralValue.toString(), 'ether')\n            );\n            onClose();\n        });\n    };\n\n    render() {\n        const { visible, network, onClose } = this.props;\n        const supportedTokenOptions = network.supportedTokens.map(\n            supportedToken => [\n                supportedToken.address,\n                `${supportedToken.symbol} (${supportedToken.address})`\n            ]\n        );\n        const unit = getUnitByAddress(\n            network.supportedTokens,\n            this.state.token\n        );\n\n        const formItems = [\n            {\n                name: 'token',\n                field: 'select',\n                fieldOptions: {\n                    options: supportedTokenOptions,\n                    placeholder: 'Token type to borrow'\n                },\n                rules: [\n                    {\n                        message: 'Please select a token!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'value',\n                field: 'number',\n                fieldOptions: {\n                    ...currencyFieldOptions(unit),\n                    placeholder: 'The amount of token to borrow'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a value!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'maxRate',\n                label: 'Max Rate',\n                field: 'number',\n                fieldOptions: {\n                    ...rateFieldOptions,\n                    placeholder: 'The maximum interest rate'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a max rate!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'minValue',\n                label: 'Min Value',\n                field: 'number',\n                fieldOptions: {\n                    ...currencyFieldOptions(unit),\n                    placeholder: 'The minimum value for bidding'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a min value!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'duration',\n                field: 'number',\n                fieldOptions: {\n                    ...blockFieldOptions,\n                    placeholder: 'The duration of the borrowing'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'collateralAddress',\n                label: 'Collateral Address',\n                fieldOptions: {\n                    placeholder: 'The address of collateral token'\n                }\n            },\n            {\n                name: 'collateralValue',\n                label: 'Collateral Value',\n                field: 'number',\n                fieldOptions: {\n                    placeholder: 'The amount of collateral token'\n                },\n                rules: [minValueRule(0)]\n            },\n            {\n                name: 'bidDuration',\n                label: 'Bid Duration',\n                field: 'number',\n                fieldOptions: {\n                    ...blockFieldOptions,\n                    placeholder: 'The duration of bidding period'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'revealDuration',\n                label: 'Reveal Duration',\n                field: 'number',\n                fieldOptions: {\n                    ...blockFieldOptions,\n                    placeholder: 'The duration of revealing period'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'claimDuration',\n                label: 'Claim Duration',\n                field: 'number',\n                fieldOptions: {\n                    ...blockFieldOptions,\n                    placeholder: 'The duration of claiming period'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'challengeDuration',\n                label: 'Challenge Duration',\n                field: 'number',\n                fieldOptions: {\n                    ...blockFieldOptions,\n                    placeholder: 'The duration of challenge period'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'finalizeDuration',\n                label: 'Finalize Duration',\n                field: 'number',\n                fieldOptions: {\n                    ...blockFieldOptions,\n                    placeholder: 'The duration of finalize period'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            }\n        ];\n\n        return (\n            <Modal\n                title=\"Launch Auction\"\n                visible={visible}\n                onOk={this.handleInitAuction}\n                onCancel={onClose}\n            >\n                <Form\n                    ref={this.form}\n                    items={formItems}\n                    onValuesChange={this.handleValueChange}\n                />\n            </Modal>\n        );\n    }\n}\n\nAuctionForm.propTypes = {\n    visible: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nAuctionForm.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nexport default AuctionForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { drizzleConnect } from 'drizzle-react';\nimport { Link } from 'dva/router';\nimport { Button, Card, List, Statistic, Row, Col, Icon } from 'antd';\n\nimport AuctionForm from '../components/liba/auction-form';\nimport { getUnitByAddress, formatCurrencyValue } from '../utils/unit';\nimport { getCurrentPeriod } from '../utils/liba';\n\nconst tabList = [\n    {\n        key: 'all',\n        tab: 'All'\n    },\n    {\n        key: 'own',\n        tab: 'Own'\n    },\n    {\n        key: 'bid',\n        tab: 'Bid'\n    }\n];\n\nclass LiBA extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = { isModalVisible: false, tab: 'all' };\n        this.contracts = context.drizzle.contracts;\n    }\n\n    onTabChange = tab => {\n        this.setState({ tab });\n    };\n\n    toggleModal = () => {\n        this.setState(prevState => ({\n            isModalVisible: !prevState.isModalVisible\n        }));\n    };\n\n    renderAuction = auction => {\n        const { network, LiBA } = this.props;\n        const { asker, value, duration, tokenAddress } = auction.value;\n        const unit = getUnitByAddress(network.supportedTokens, tokenAddress);\n\n        return (\n            <List.Item>\n                <Card\n                    actions={[\n                        <Link to={`/auction/${auction.args[0]}`}>\n                            <Icon type=\"eye\" title=\"View Detail\" />\n                        </Link>\n                    ]}\n                >\n                    <Row>\n                        <Col span={12}>\n                            <Statistic title=\"Asker\" value={asker} />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Period\"\n                                value={getCurrentPeriod(\n                                    network,\n                                    auction,\n                                    LiBA.getAuctionPeriod\n                                )}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Value\"\n                                value={formatCurrencyValue(value, unit)}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Duration\"\n                                value={`${duration} Block`}\n                            />\n                        </Col>\n                    </Row>\n                </Card>\n            </List.Item>\n        );\n    };\n\n    renderAuctions = () => {\n        const { accounts, LiBA } = this.props;\n        const { tab } = this.state;\n\n        let data = _.values(LiBA.getAuction);\n\n        if (tab === 'own') {\n            data = _.filter(\n                data,\n                auction => auction.value.asker === accounts[0]\n            );\n        }\n\n        if (tab === 'bid') {\n            data = _.filter(data, auction =>\n                _.includes(LiBA.bids, auction.args[0])\n            );\n        }\n\n        return (\n            <List\n                grid={{ gutter: 16, column: 3 }}\n                dataSource={data}\n                renderItem={this.renderAuction}\n            />\n        );\n    };\n\n    render() {\n        const { isModalVisible, tab } = this.state;\n        const { network } = this.props;\n\n        return (\n            <Card\n                tabList={tabList}\n                title=\"LiBA\"\n                activeTabKey={tab}\n                onTabChange={this.onTabChange}\n                extra={\n                    <Button type=\"primary\" onClick={this.toggleModal}>\n                        Launch auction\n                    </Button>\n                }\n            >\n                {this.renderAuctions()}\n                <AuctionForm\n                    network={network}\n                    visible={isModalVisible}\n                    onClose={this.toggleModal}\n                />\n            </Card>\n        );\n    }\n}\n\nLiBA.propTypes = {\n    dispatch: PropTypes.func.isRequired\n};\n\nLiBA.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n    const { contracts, accounts, LiBA, network } = state;\n\n    return {\n        accounts,\n        network,\n        LiBA: { ...LiBA, ...contracts.LiBA }\n    };\n}\n\nexport default drizzleConnect(LiBA, mapStateToProps);\n"],"sourceRoot":""}