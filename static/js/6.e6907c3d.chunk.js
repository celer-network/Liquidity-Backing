(this["webpackJsonptruffle-react-redux-dapp"]=this["webpackJsonptruffle-react-redux-dapp"]||[]).push([[6],{1043:function(e,a,t){"use strict";t.r(a);var n=t(45),r=t(80),l=t(81),i=t(83),o=t(82),u=t(84),c=t(0),s=t.n(c),d=t(1),f=t.n(d),b=t(30),m=t.n(b),p=t(92),h=t(49),v=t(1042),O=t(979),g=t(11),j=t(127),k=t(62),C=t(978),E=t(77),w=t(191),A=t(270),y=t(415),T=A.a.Item,z=function(e){function a(){var e,t;Object(r.a)(this,a);for(var n=arguments.length,l=new Array(n),u=0;u<n;u++)l[u]=arguments[u];return(t=Object(i.a)(this,(e=Object(o.a)(a)).call.apply(e,[this].concat(l)))).onChange=function(e){var a=t.props,n=a.name,r=a.onChange;r(n?Object(w.a)({},n,e):e)},t}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.allowClear,t=e.label,r=e.name,l=e.mode,i=e.value,o=Object(n.a)({},m.a.omit(this.props,["label","name","onChange"]));return"multiple"!==l||i||(o.value=[]),l||a||(o.allowClear=!1),s.a.createElement(T,{className:"dropdown-filter",label:t||m.a.capitalize(r)},s.a.createElement(y.a,Object.assign({},o,{onChange:this.onChange})))}}]),a}(s.a.PureComponent);z.defaultProps={disabled:!1,label:"",placeholder:"all"};var D=t(131),V=t.n(D),P=t(972),x=t(273),q=t(272),F=t(271),L=t(980),M=function(e){function a(e,t){var n;return Object(r.a)(this,a),(n=Object(i.a)(this,Object(o.a)(a).call(this,e))).handleValueChange=function(e){return n.setState(e)},n.handleInitAuction=function(){var e=n.props.onClose;n.form.current.validateFields((function(a,t){if(!a){var r=t.token,l=t.bidDuration,i=t.revealDuration,o=t.claimDuration,u=t.challengeDuration,c=t.finalizeDuration,s=t.value,d=t.duration,f=t.maxRate,b=t.minValue,m=t.collateralAddress,p=t.collateralValue,h=void 0===p?0:p;n.contracts.LiBA.methods.initAuction.cacheSend(r,l,i,o,u,c,V.a.utils.toWei(s.toString(),"ether"),d,f*L.b,V.a.utils.toWei(b.toString(),"ether"),m,V.a.utils.toWei(h.toString(),"ether")),e()}}))},n.state={},n.form=s.a.createRef(),n.contracts=t.drizzle.contracts,n}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.props,a=e.visible,t=e.network,r=e.onClose,l=t.supportedTokens.map((function(e){return[e.address,"".concat(e.symbol," (").concat(e.address,")")]})),i=Object(F.c)(t.supportedTokens,this.state.token),o=[{name:"token",field:"select",fieldOptions:{options:l,placeholder:"Token type to borrow"},rules:[{message:"Please select a token!",required:!0}]},{name:"value",field:"number",fieldOptions:Object(n.a)({},Object(q.c)(i),{placeholder:"The amount of token to borrow"}),rules:[Object(q.f)(0),{message:"Please enter a value!",required:!0}]},{name:"duration",field:"number",fieldOptions:Object(n.a)({},q.d,{placeholder:"The duration of the borrowing"}),rules:[Object(q.f)(0),{message:"Please enter a duration!",required:!0}]},{name:"maxRate",label:"Max Daily Rate",field:"number",fieldOptions:Object(n.a)({},q.g,{step:.1,precision:L.c,placeholder:"The maximum daily interest rate"}),rules:[Object(q.f)(0),{message:"Please enter a max rate!",required:!0}]},{name:"minValue",label:"Min Value",field:"number",fieldOptions:Object(n.a)({},Object(q.c)(i),{placeholder:"The minimum value for bidding"}),rules:[Object(q.f)(0),{message:"Please enter a min value!",required:!0}]},{name:"collateralAddress",label:"Collateral Address",fieldOptions:{placeholder:"The address of collateral token"}},{name:"collateralValue",label:"Collateral Value",field:"number",fieldOptions:{placeholder:"The amount of collateral token"},rules:[Object(q.f)(0)]},{name:"bidDuration",label:"Bid Duration",field:"number",fieldOptions:Object(n.a)({},q.a,{placeholder:"The duration of bidding period"}),rules:[Object(q.f)(0),{message:"Please enter a duration!",required:!0}]},{name:"revealDuration",label:"Reveal Duration",field:"number",fieldOptions:Object(n.a)({},q.a,{placeholder:"The duration of revealing period"}),rules:[Object(q.f)(0),{message:"Please enter a duration!",required:!0}]},{name:"claimDuration",label:"Claim Duration",field:"number",fieldOptions:Object(n.a)({},q.a,{placeholder:"The duration of claiming period"}),rules:[Object(q.f)(0),{message:"Please enter a duration!",required:!0}]},{name:"challengeDuration",label:"Challenge Duration",field:"number",fieldOptions:Object(n.a)({},q.a,{placeholder:"The duration of challenge period"}),rules:[Object(q.f)(0),{message:"Please enter a duration!",required:!0}]},{name:"finalizeDuration",label:"Finalize Duration",field:"number",fieldOptions:Object(n.a)({},q.a,{placeholder:"The duration of finalize period"}),rules:[Object(q.f)(0),{message:"Please enter a duration!",required:!0}]}];return s.a.createElement(P.a,{title:"Launch Auction",visible:a,onOk:this.handleInitAuction,onCancel:r},s.a.createElement(x.a,{ref:this.form,items:o,onValuesChange:this.handleValueChange}))}}]),a}(s.a.Component);M.contextTypes={drizzle:f.a.object};var B=M,S=t(981),N=[{key:"all",tab:"All"},{key:"own",tab:"Own"},{key:"bid",tab:"Bid"}],I=function(e){function a(e,t){var l;return Object(r.a)(this,a),(l=Object(i.a)(this,Object(o.a)(a).call(this,e))).onTabChange=function(e){l.setState({tab:e})},l.toggleModal=function(){l.setState((function(e){return{isModalVisible:!e.isModalVisible}}))},l.updateFilter=function(e){l.setState((function(a){return{filter:Object(n.a)({},a.filter,{},e)}}))},l.renderAuction=function(e){var a=l.props.network,t=e.value,n=t.asker,r=t.value,i=t.duration,o=t.tokenAddress,u=t.period,c=Object(F.c)(a.supportedTokens,o);return s.a.createElement(v.a.Item,null,s.a.createElement(O.a,{actions:[s.a.createElement(h.Link,{to:"/auction/".concat(e.args[0])},s.a.createElement(g.a,{type:"eye",title:"View Detail"}))]},s.a.createElement(j.a,null,s.a.createElement(k.a,{span:12},s.a.createElement(C.a,{title:"Asker",value:n})),s.a.createElement(k.a,{span:12},s.a.createElement(C.a,{title:"Period",value:u})),s.a.createElement(k.a,{span:12},s.a.createElement(C.a,{title:"Value",value:Object(F.b)(r,c)})),s.a.createElement(k.a,{span:12},s.a.createElement(C.a,{title:"Duration",value:"".concat(i," Day")})))))},l.renderFilters=function(){var e=S.a.map((function(e){return[e,e]})),a=m()(l.auctions).map((function(e){return e.value.asker})).uniq().map((function(e){return[e,e]})).value();return s.a.createElement(s.a.Fragment,null,s.a.createElement(z,{name:"period",options:e,style:{width:100},onChange:l.updateFilter,allowClear:!0}),s.a.createElement(z,{name:"asker",options:a,style:{width:200},onChange:l.updateFilter,allowClear:!0}))},l.renderAuctions=function(){var e=l.props,a=e.accounts,t=e.LiBA,n=e.network,r=l.state,i=r.tab,o=r.filter,u=m.a.values(t.getAuction);return"own"===i&&(u=m.a.filter(u,(function(e){return e.value.asker===a[0]}))),"bid"===i&&(u=m.a.filter(u,(function(e){return m.a.includes(t.bids,e.args[0])}))),(u=m.a.filter(u,(function(e){var a=e.value.asker;if(o.asker&&o.asker!==a)return!1;var r=Object(S.k)(Object(S.j)(t.getAuctionPeriod,e),m.a.get(n,"block.number"));return(!o.period||o.period===r)&&(e.value.period=r,!0)}))).sort((function(e,a){return a.args[0]-e.args[0]})),l.auctions=u,s.a.createElement(v.a,{grid:{gutter:16,column:3},dataSource:u,renderItem:l.renderAuction})},l.state={isModalVisible:!1,tab:"all",filter:{}},l.contracts=t.drizzle.contracts,l}return Object(u.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this.state,a=e.isModalVisible,t=e.tab,n=this.props.network;return s.a.createElement(O.a,{tabList:N,title:"Auctions",activeTabKey:t,onTabChange:this.onTabChange,extra:s.a.createElement(E.a,{type:"primary",onClick:this.toggleModal},"Launch auction")},this.renderFilters(),this.renderAuctions(),s.a.createElement(B,{network:n,visible:a,onClose:this.toggleModal}))}}]),a}(s.a.Component);I.contextTypes={drizzle:f.a.object};a.default=Object(p.drizzleConnect)(I,(function(e){var a=e.contracts,t=e.accounts,r=e.LiBA;return{accounts:t,network:e.network,LiBA:Object(n.a)({},r,{},a.LiBA)}}))},980:function(e,a,t){"use strict";t.d(a,"a",(function(){return n})),t.d(a,"c",(function(){return r})),t.d(a,"b",(function(){return l}));var n="0x0000000000000000000000000000000000000000",r=1,l=Math.pow(10,r)},981:function(e,a,t){"use strict";t.d(a,"b",(function(){return u})),t.d(a,"h",(function(){return c})),t.d(a,"d",(function(){return s})),t.d(a,"c",(function(){return d})),t.d(a,"f",(function(){return f})),t.d(a,"g",(function(){return b})),t.d(a,"e",(function(){return m})),t.d(a,"a",(function(){return p})),t.d(a,"j",(function(){return h})),t.d(a,"k",(function(){return v})),t.d(a,"l",(function(){return O})),t.d(a,"i",(function(){return g}));var n=t(275),r=t(30),l=t.n(r),i=t(131),o=t.n(i).a.utils.BN,u="Bid",c="Reveal",s="Claim",d="Challenge",f="Finalize",b="Finalized",m="Expired",p=[u,c,s,d,f,b,m],h=function(e,a){return l.a.find(e,(function(e){return e.args[0]===a.args[0]}))},v=function(e,a){var t=l.a.get(e,"value",{}),n=t.bidEnd,r=t.revealEnd,i=t.claimEnd,o=t.challengeEnd,p=t.finalizeEnd,h=t.finalized;return a<l.a.toNumber(n)?u:a<l.a.toNumber(r)?c:a<l.a.toNumber(i)?s:a<l.a.toNumber(o)?d:!h&&a<l.a.toNumber(p)?f:h?b:m},O=function(e,a){var t,r=[],i=e.value.value;return a.sort(j),l.a.forEach(a,(function(e){var a=Object(n.a)(e.args,1)[0],l=e.value.value;if(i<=0)return t=a,!1;i-=l,r.push(a)})),t||(t=l.a.last(r)),{winners:r,topLoser:t}},g=function(e,a){var t=new o(0);return l.a.forEach(e,(function(e){var r=Object(n.a)(e.args,1)[0],i=e.value,u=i.value,c=i.rate;l.a.includes(a,r)&&(t=t.add(new o(u).muln(100+parseInt(c)).divn(100)))})),t},j=function(e,a){var t=e.value,n=t.rate,r=t.celerValue,l=a.value,i=l.rate,o=l.celerValue;return n!==i?n-i:o-r}}}]);
//# sourceMappingURL=6.e6907c3d.chunk.js.map