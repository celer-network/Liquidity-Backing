(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{795:function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"a",function(){return s});var a=n(62),r=n.n(a),o=n(183),c=n.n(o),i=(n(145),function(e,t){var n=r.a.find(e,function(e){return e.address===t});return n?n.symbol:""}),l=function(e,t){return r.a.toNumber(e)<1e5?"".concat(e," wei"):"".concat(c.a.utils.fromWei(e)," ").concat(t)},s=function(e){return l(e,"CELR")}},796:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a="0x0000000000000000000000000000000000000000"},812:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var a=n(1),r=n(8),o=n(38),c=n(11),i=n(3),l=n.n(i),s=n(10),u=n(239);function d(e){return(d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(){}var y=function(e){function t(){var e,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,i=b(t).apply(this,arguments),(e=!i||"object"!==d(i)&&"function"!==typeof i?h(n):i).state={closing:!0,closed:!1},e.handleClose=function(t){t.preventDefault();var n=r.findDOMNode(h(e));n.style.height="".concat(n.offsetHeight,"px"),n.style.height="".concat(n.offsetHeight,"px"),e.setState({closing:!1}),(e.props.onClose||w)(t)},e.animationEnd=function(){e.setState({closed:!0,closing:!0}),(e.props.afterClose||w)()},e.renderAlert=function(t){var n,r,i=t.getPrefixCls,s=e.props,d=s.description,f=s.prefixCls,b=s.message,h=s.closeText,v=s.banner,w=s.className,y=void 0===w?"":w,g=s.style,C=s.icon,E=e.props,O=E.closable,k=E.type,j=E.showIcon,P=E.iconType,x=i("alert",f);j=!(!v||void 0!==j)||j,k=v&&void 0===k?"warning":k||"info";var S="filled";if(!P){switch(k){case"success":P="check-circle";break;case"info":P="info-circle";break;case"error":P="close-circle";break;case"warning":P="exclamation-circle";break;default:P="default"}d&&(S="outlined")}h&&(O=!0);var N=l()(x,"".concat(x,"-").concat(k),(p(n={},"".concat(x,"-close"),!e.state.closing),p(n,"".concat(x,"-with-description"),!!d),p(n,"".concat(x,"-no-icon"),!j),p(n,"".concat(x,"-banner"),!!v),p(n,"".concat(x,"-closable"),O),n),y),L=O?a.createElement("a",{onClick:e.handleClose,className:"".concat(x,"-close-icon")},h||a.createElement(c.a,{type:"close"})):null,T=Object(u.a)(e.props),z=C&&(a.isValidElement(C)?a.cloneElement(C,{className:l()((r={},p(r,C.props.className,C.props.className),p(r,"".concat(x,"-icon"),!0),r))}):a.createElement("span",{className:"".concat(x,"-icon")},C))||a.createElement(c.a,{className:"".concat(x,"-icon"),type:P,theme:S});return e.state.closed?null:a.createElement(o.a,{component:"",showProp:"data-show",transitionName:"".concat(x,"-slide-up"),onEnd:e.animationEnd},a.createElement("div",m({"data-show":e.state.closing,className:N,style:g},T),j?z:null,a.createElement("span",{className:"".concat(x,"-message")},b),a.createElement("span",{className:"".concat(x,"-description")},d),L))},e}var n,i,y;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,a["Component"]),n=t,(i=[{key:"render",value:function(){return a.createElement(s.a,null,this.renderAlert)}}])&&f(n.prototype,i),y&&f(n,y),t}()},875:function(e,t,n){"use strict";n.r(t);var a=n(238),r=n(71),o=n(72),c=n(74),i=n(73),l=n(75),s=n(1),u=n.n(s),d=n(0),m=n.n(d),p=n(62),f=n.n(p),b=n(115),h=n(788),v=n(874),w=n(794),y=n(68),g=n(113),C=n(55),E=n(870),O=n(43),k=n(183),j=n.n(k),P=n(784),x=n(812),S=n(236),N=n(796),L=n(795),T=n(235),z=function(e){function t(e,n){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleValueChange=function(e){return a.setState(e)},a.handleCommitFund=function(){var e=a.props.onClose;a.form.current.validateFields(function(t,n){var r;if(!t){var o=n.token,c=n.duration,i=n.value,l=j.a.utils.toWei(i.toString(),"ether"),s=[o,c,l];o===N.a&&s.push({value:l}),(r=a.contracts.PoLC.methods.commitFund).cacheSend.apply(r,s),a.form.current.resetFields(),e()}})},a.state={},a.form=u.a.createRef(),a.contracts=n.drizzle.contracts,a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.visible,a=e.onClose,r=t.supportedTokens.map(function(e){return[e.address,"".concat(e.symbol," (").concat(e.address,")")]}),o=Object(L.c)(t.supportedTokens,this.state.token),c=[{name:"token",field:"select",fieldOptions:{options:r,placeholder:"Token type to commit"},rules:[{message:"Please select a token!",required:!0}]},{name:"value",field:"number",fieldOptions:Object(O.a)({},Object(T.c)(o),{placeholder:"The amount of token to commit"}),rules:[Object(T.e)(0),{message:"Please enter a value!",required:!0}]},{name:"duration",field:"number",fieldOptions:Object(O.a)({},T.d,{placeholder:"Lock-in duration"}),rules:[Object(T.e)(0),{message:"Please enter a duration!",required:!0}]}];return u.a.createElement(P.a,{title:"Commit Fund",visible:n,onOk:this.handleCommitFund,onCancel:a},u.a.createElement(x.a,{message:"Your fund will not be available until the commitment expires",type:"warning",showIcon:!0}),u.a.createElement(S.a,{ref:this.form,items:c,onValuesChange:this.handleValueChange}))}}]),t}(u.a.Component);z.contextTypes={drizzle:m.a.object};var V=z,F=function(e){return("0"!==e?new Date(864e5*f.a.toNumber(e)):new Date).toLocaleDateString()},M=function(e){return f.a.toNumber(e)<new Date/864e5},R=function(e){function t(e,n){var o;return Object(r.a)(this,t),(o=Object(c.a)(this,Object(i.a)(t).call(this,e))).toggleModal=function(){o.setState(function(e){return{isModalVisible:!e.isModalVisible}})},o.withdrawFund=function(e){var t=e.currentTarget.dataset.index,n=o.props.PoLC,r=f.a.values(n.commitmentsByUser)[t],c=r.value.lockEnd,i=Object(a.a)(r.args,2)[1];M(c)?o.contracts.PoLC.methods.withdrawFund.cacheSend(i):h.a.error("Cannot withdraw fund before expiration")},o.withdrawReward=function(e){var t=e.currentTarget.dataset.index,n=o.props.PoLC,r=f.a.values(n.commitmentsByUser)[t],c=r.value.lockEnd,i=Object(a.a)(r.args,2)[1];M(c)?o.contracts.PoLC.methods.withdrawReward.cacheSend(i):h.a.error("Cannot withdraw reward before expiration")},o.renderCommitment=function(e,t){var n=o.props.network,a=e.value,r=a.tokenAddress,c=a.lockEnd,i=a.availableValue,l=a.lendingValue,s=e.args[1],d=Object(L.c)(n.supportedTokens,r);return u.a.createElement(v.a.Item,null,u.a.createElement(w.a,{actions:[u.a.createElement(y.a,{"data-index":t,icon:"export",size:"small",title:"Withdraw Fund",type:"link",onClick:o.withdrawFund},"Withdraw"),u.a.createElement(y.a,{"data-index":t,icon:"dollar",size:"small",title:"Withdraw Reward",type:"link",onClick:o.withdrawReward},"Reward")]},u.a.createElement(g.a,null,u.a.createElement(C.a,{span:12},u.a.createElement(E.a,{title:"ID",groupSeparator:"",value:s})),u.a.createElement(C.a,{span:12},u.a.createElement(E.a,{title:"Lock End",value:F(c)})),u.a.createElement(C.a,{span:12},u.a.createElement(E.a,{title:"Available Value",value:Object(L.b)(i,d)})),u.a.createElement(C.a,{span:12},u.a.createElement(E.a,{title:"Lending Value",value:Object(L.b)(l,d)})))))},o.renderCommiments=function(){var e=o.props.PoLC,t=f.a.values(e.commitmentsByUser);return u.a.createElement(v.a,{grid:{gutter:16,column:3},dataSource:t,renderItem:o.renderCommitment})},o.state={isModalVisible:!1},o.contracts=n.drizzle.contracts,o}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.isModalVisible,t=this.props.network;return u.a.createElement(w.a,{title:"PoLC",extra:u.a.createElement(y.a,{type:"primary",onClick:this.toggleModal},"Commit fund")},this.renderCommiments(),u.a.createElement(V,{network:t,visible:e,onClose:this.toggleModal}))}}]),t}(u.a.Component);R.contextTypes={drizzle:m.a.object};t.default=Object(b.drizzleConnect)(R,function(e){var t=e.contracts;return{network:e.network,PoLC:t.PoLC}})}}]);
//# sourceMappingURL=6.c55b8115.chunk.js.map