{"version":3,"sources":["utils/unit.js","utils/form.js","components/select.js","components/form.js","../node_modules/antd/es/alert/index.js","utils/constant.js","components/polc/commitment-form.js","routes/polc.js"],"names":["__webpack_require__","d","__webpack_exports__","getUnitByAddress","formatCurrencyValue","formatEthValue","lodash__WEBPACK_IMPORTED_MODULE_0__","lodash__WEBPACK_IMPORTED_MODULE_0___default","n","web3__WEBPACK_IMPORTED_MODULE_1__","web3__WEBPACK_IMPORTED_MODULE_1___default","supportedTokens","address","token","_","find","supportedToken","symbol","value","unit","toNumber","concat","web3","utils","fromWei","etherFieldOptions","currencyFieldOptions","dayFieldOptions","blockFieldOptions","minValueRule","formatter","parser","replace","minValue","validator","rule","callback","Option","Select","defaultProps","allowClear","disabled","optionFilterProp","placeholder","state","undefined","onChange","_this","setState","getValue","defaultValue","props","renderOptions","options","map","_ref","_ref2","Object","slicedToArray","text","react_default","a","createElement","key","this","objectSpread","omit","isNil","es_select","assign","showSearch","React","Component","FormItem","Form","Item","buttonLayout","wrapperCol","sm","span","offset","xs","FIELD_MAP","date","DatePicker","input","Input","number","InputNumber","TextArea","select","CustomizeForm","handleSubmit","e","_this$props","form","onSubmit","preventDefault","validateFields","err","values","renderFormItems","_this$props2","formItemLayout","items","getFieldDecorator","item","_item$field","field","fieldOptions","initialValue","label","name","rules","Field","decoratorOptions","getValueFromEvent","_len2","arguments","length","args","Array","_key2","fileList","target","type","checked","capitalize","_this$props3","submitText","es_form","noop","es_button","htmlType","labelCol","create","onValuesChange","changedValues","Alert","react__WEBPACK_IMPORTED_MODULE_0__","react_dom__WEBPACK_IMPORTED_MODULE_1__","rc_animate__WEBPACK_IMPORTED_MODULE_2__","_icon__WEBPACK_IMPORTED_MODULE_3__","classnames__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_4___default","_config_provider__WEBPACK_IMPORTED_MODULE_5__","_util_getDataOrAriaProps__WEBPACK_IMPORTED_MODULE_6__","_typeof","obj","Symbol","iterator","constructor","prototype","_extends","i","source","hasOwnProperty","call","apply","_defineProperty","defineProperty","enumerable","configurable","writable","_defineProperties","descriptor","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","_React$Component","instance","Constructor","TypeError","_classCallCheck","closing","closed","handleClose","dom","style","height","offsetHeight","onClose","animationEnd","afterClose","renderAlert","_classNames","_classNames2","getPrefixCls","description","customizePrefixCls","prefixCls","message","closeText","banner","_this$props$className","className","icon","closable","showIcon","iconType","iconTheme","alertCls","closeIcon","onClick","dataOrAriaProps","iconNode","theme","component","showProp","transitionName","onEnd","data-show","protoProps","staticProps","subClass","superClass","_inherits","EMPTY_ADDRESS","CommimentForm","context","classCallCheck","possibleConstructorReturn","handleValueChange","changedValue","handleCommitFund","current","duration","formatedValue","toWei","toString","sendOption","contracts","PoLC","methods","commitFund","cacheSend","resetFields","createRef","drizzle","network","visible","formItems","required","modal","title","onOk","onCancel","es_alert","components_form","ref","contextTypes","PropTypes","object","formatDayTime","day","Date","toLocaleDateString","checkLock","toggleModal","prevState","isModalVisible","withdrawFund","index","currentTarget","dataset","commitment","commitmentsByUser","lockEnd","commitmentId","error","withdrawReward","renderCommitment","_commitment$value","tokenAddress","lockStart","availableValue","lendingValue","list","card","actions","data-index","row","col","statistic","renderCommiments","data","grid","gutter","column","dataSource","renderItem","extra","commitment_form","drizzleConnect"],"mappings":"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","file":"static/js/7.de13b0e9.chunk.js","sourcesContent":["import _ from 'lodash';\nimport web3 from 'web3';\n\nimport './network';\n\nexport const getUnitByAddress = (supportedTokens, address) => {\n    const token = _.find(\n        supportedTokens,\n        supportedToken => supportedToken.address === address\n    );\n\n    if (!token) {\n        return '';\n    }\n    return token.symbol;\n};\n\nexport const formatCurrencyValue = (value, unit) => {\n    const num = _.toNumber(value);\n\n    if (num < 100000) {\n        return `${value} wei`;\n    }\n\n    return `${web3.utils.fromWei(value)} ${unit}`;\n};\n\nexport const formatEthValue = value => {\n    const num = _.toNumber(value);\n\n    if (num < 100000) {\n        return `${value} wei`;\n    }\n\n    return `${web3.utils.fromWei(value)} ether`;\n};\n","export const etherFieldOptions = {\n    formatter: value => (value ? `${value}ether` : ''),\n    parser: value => value.replace(/[a-z]/g, '')\n};\n\nexport const currencyFieldOptions = unit => ({\n    formatter: value => (value ? `${value}${unit}` : ''),\n    parser: value => value.replace(/[A-Z]/g, '')\n});\n\nexport const dayFieldOptions = {\n    formatter: value => (value ? `${value}day` : ''),\n    parser: value => value.replace(/[a-z]/g, '')\n};\n\nexport const blockFieldOptions = {\n    formatter: value => (value ? `${value}block` : ''),\n    parser: value => value.replace(/[a-z]/g, '')\n};\n\nexport const minValueRule = minValue => ({\n    validator: (rule, value, callback) => {\n        if (value < minValue) {\n            const msg = `value is smaller than ${minValue}`;\n            callback(msg);\n        }\n\n        callback();\n    }\n});\n","import React from 'react';\nimport { Select } from 'antd';\nimport _ from 'lodash';\n\nconst Option = Select.Option;\n\nexport default class extends React.Component {\n    defaultProps = {\n        allowClear: true,\n        disabled: false,\n        optionFilterProp: 'children',\n        placeholder: ''\n    };\n\n    state = { value: undefined };\n\n    onChange = (value: ValueType) => this.setState({ value });\n\n    getValue = () => {\n        const { defaultValue } = this.props;\n        const { value } = this.state;\n        return value || defaultValue;\n    };\n\n    renderOptions = () => {\n        const { options } = this.props;\n        return _.map(options, ([value, text]) => (\n            <Option key={value} value={value}>\n                {text}\n            </Option>\n        ));\n    };\n\n    render() {\n        const { defaultValue } = this.props;\n        const props = {\n            ..._.omit(this.props, ['options', 'defaultValue'])\n        };\n\n        if (!props.onChange) {\n            props.onChange = this.onChange;\n        }\n        if (!_.isNil(defaultValue)) {\n            props.defaultValue = defaultValue;\n        }\n\n        return (\n            <Select {...props} showSearch={true}>\n                {this.renderOptions()}\n            </Select>\n        );\n    }\n}\n","import React from 'react';\nimport _ from 'lodash';\nimport { Button, DatePicker, Form, Input, InputNumber } from 'antd';\n\nimport Select from './select';\n\nconst FormItem = Form.Item;\n\nconst defaultFormItemLayout = {\n    labelCol: {\n        sm: { span: 8 },\n        xs: { span: 24 }\n    },\n\n    wrapperCol: {\n        sm: { span: 16 },\n        xs: { span: 24 }\n    }\n};\n\nconst buttonLayout = {\n    wrapperCol: {\n        sm: { span: 3, offset: 21 },\n        xs: { span: 24 }\n    }\n};\n\nconst FIELD_MAP = {\n    date: DatePicker,\n    input: Input,\n    number: InputNumber,\n    text: Input.TextArea,\n    select: Select\n};\n\nclass CustomizeForm extends React.Component {\n    handleSubmit = e => {\n        const { form, onSubmit } = this.props;\n        e.preventDefault();\n        form.validateFields((err, values) => {\n            if (!err) {\n                onSubmit(values);\n            }\n        });\n    };\n\n    renderFormItems = () => {\n        const { form, formItemLayout, items } = this.props;\n        const { getFieldDecorator } = form;\n\n        return _.map(items, item => {\n            const {\n                field = 'input',\n                fieldOptions,\n                initialValue,\n                label,\n                name,\n                rules\n            } = item;\n            const Field = FIELD_MAP[field];\n            const decoratorOptions = {\n                initialValue,\n                rules,\n                getValueFromEvent(...args) {\n                    if (field === 'file') {\n                        return args[0].fileList;\n                    }\n\n                    const [e] = args;\n                    if (!e || !e.target) {\n                        return e;\n                    }\n\n                    const { target } = e;\n                    return target.type === 'checkbox'\n                        ? target.checked\n                        : target.value;\n                }\n            };\n\n            return (\n                <FormItem\n                    key={name}\n                    {...formItemLayout}\n                    label={!label ? _.capitalize(name) : label}\n                >\n                    {getFieldDecorator(name, decoratorOptions)(\n                        <Field {...fieldOptions} />\n                    )}\n                </FormItem>\n            );\n        });\n    };\n\n    render() {\n        const { onSubmit, submitText } = this.props;\n        return (\n            <Form onSubmit={this.handleSubmit}>\n                {this.renderFormItems()}\n                {onSubmit !== _.noop && (\n                    <FormItem {...buttonLayout}>\n                        <Button htmlType=\"submit\" type=\"primary\">\n                            {submitText}\n                        </Button>\n                    </FormItem>\n                )}\n            </Form>\n        );\n    }\n}\n\nCustomizeForm.defaultProps = {\n    formItemLayout: defaultFormItemLayout,\n    onSubmit: _.noop,\n    submitText: 'Save'\n};\n\nexport default Form.create({\n    onValuesChange(props, changedValues) {\n        if (props.onValuesChange) {\n            props.onValuesChange(changedValues);\n        }\n    }\n})(CustomizeForm);\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Animate from 'rc-animate';\nimport Icon from '../icon';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\nimport getDataOrAriaProps from '../_util/getDataOrAriaProps';\n\nfunction noop() {}\n\nvar Alert =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Alert, _React$Component);\n\n  function Alert() {\n    var _this;\n\n    _classCallCheck(this, Alert);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Alert).apply(this, arguments));\n    _this.state = {\n      closing: true,\n      closed: false\n    };\n\n    _this.handleClose = function (e) {\n      e.preventDefault();\n      var dom = ReactDOM.findDOMNode(_assertThisInitialized(_this));\n      dom.style.height = \"\".concat(dom.offsetHeight, \"px\"); // Magic code\n      // 重复一次后才能正确设置 height\n\n      dom.style.height = \"\".concat(dom.offsetHeight, \"px\");\n\n      _this.setState({\n        closing: false\n      });\n\n      (_this.props.onClose || noop)(e);\n    };\n\n    _this.animationEnd = function () {\n      _this.setState({\n        closed: true,\n        closing: true\n      });\n\n      (_this.props.afterClose || noop)();\n    };\n\n    _this.renderAlert = function (_ref) {\n      var _classNames, _classNames2;\n\n      var getPrefixCls = _ref.getPrefixCls;\n      var _this$props = _this.props,\n          description = _this$props.description,\n          customizePrefixCls = _this$props.prefixCls,\n          message = _this$props.message,\n          closeText = _this$props.closeText,\n          banner = _this$props.banner,\n          _this$props$className = _this$props.className,\n          className = _this$props$className === void 0 ? '' : _this$props$className,\n          style = _this$props.style,\n          icon = _this$props.icon;\n      var _this$props2 = _this.props,\n          closable = _this$props2.closable,\n          type = _this$props2.type,\n          showIcon = _this$props2.showIcon,\n          iconType = _this$props2.iconType;\n      var prefixCls = getPrefixCls('alert', customizePrefixCls); // banner模式默认有 Icon\n\n      showIcon = banner && showIcon === undefined ? true : showIcon; // banner模式默认为警告\n\n      type = banner && type === undefined ? 'warning' : type || 'info';\n      var iconTheme = 'filled'; // should we give a warning?\n      // warning(!iconType, `The property 'iconType' is deprecated. Use the property 'icon' instead.`);\n\n      if (!iconType) {\n        switch (type) {\n          case 'success':\n            iconType = 'check-circle';\n            break;\n\n          case 'info':\n            iconType = 'info-circle';\n            break;\n\n          case 'error':\n            iconType = 'close-circle';\n            break;\n\n          case 'warning':\n            iconType = 'exclamation-circle';\n            break;\n\n          default:\n            iconType = 'default';\n        } // use outline icon in alert with description\n\n\n        if (!!description) {\n          iconTheme = 'outlined';\n        }\n      } // closeable when closeText is assigned\n\n\n      if (closeText) {\n        closable = true;\n      }\n\n      var alertCls = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-close\"), !_this.state.closing), _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-description\"), !!description), _defineProperty(_classNames, \"\".concat(prefixCls, \"-no-icon\"), !showIcon), _defineProperty(_classNames, \"\".concat(prefixCls, \"-banner\"), !!banner), _defineProperty(_classNames, \"\".concat(prefixCls, \"-closable\"), closable), _classNames), className);\n      var closeIcon = closable ? React.createElement(\"a\", {\n        onClick: _this.handleClose,\n        className: \"\".concat(prefixCls, \"-close-icon\")\n      }, closeText || React.createElement(Icon, {\n        type: \"close\"\n      })) : null;\n      var dataOrAriaProps = getDataOrAriaProps(_this.props);\n      var iconNode = icon && (React.isValidElement(icon) ? React.cloneElement(icon, {\n        className: classNames((_classNames2 = {}, _defineProperty(_classNames2, icon.props.className, icon.props.className), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-icon\"), true), _classNames2))\n      }) : React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-icon\")\n      }, icon)) || React.createElement(Icon, {\n        className: \"\".concat(prefixCls, \"-icon\"),\n        type: iconType,\n        theme: iconTheme\n      });\n      return _this.state.closed ? null : React.createElement(Animate, {\n        component: \"\",\n        showProp: \"data-show\",\n        transitionName: \"\".concat(prefixCls, \"-slide-up\"),\n        onEnd: _this.animationEnd\n      }, React.createElement(\"div\", _extends({\n        \"data-show\": _this.state.closing,\n        className: alertCls,\n        style: style\n      }, dataOrAriaProps), showIcon ? iconNode : null, React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-message\")\n      }, message), React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-description\")\n      }, description), closeIcon));\n    };\n\n    return _this;\n  }\n\n  _createClass(Alert, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderAlert);\n    }\n  }]);\n\n  return Alert;\n}(React.Component);\n\nexport { Alert as default };","export const EMPTY_ADDRESS = '0x0000000000000000000000000000000000000000';\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport web3 from 'web3';\nimport { Alert, Modal } from 'antd';\n\nimport Form from '../form';\nimport { EMPTY_ADDRESS } from '../../utils/constant';\nimport { getUnitByAddress } from '../../utils/unit';\nimport {\n    currencyFieldOptions,\n    dayFieldOptions,\n    minValueRule\n} from '../../utils/form';\n\nclass CommimentForm extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = {};\n        this.form = React.createRef();\n        this.contracts = context.drizzle.contracts;\n    }\n\n    handleValueChange = changedValue => this.setState(changedValue);\n\n    handleCommitFund = () => {\n        const { onClose } = this.props;\n\n        this.form.current.validateFields((err, values) => {\n            if (err) {\n                return;\n            }\n\n            const { token, duration, value } = values;\n            const formatedValue = web3.utils.toWei(value.toString(), 'ether');\n            const sendOption = {};\n            if (token === EMPTY_ADDRESS) {\n                sendOption.value = formatedValue;\n            }\n\n            this.contracts.PoLC.methods.commitFund.cacheSend(\n                token,\n                duration,\n                formatedValue,\n                sendOption\n            );\n            this.form.current.resetFields();\n            onClose();\n        });\n    };\n\n    render() {\n        const { network, visible, onClose } = this.props;\n        const supportedTokenOptions = network.supportedTokens.map(\n            supportedToken => [\n                supportedToken.address,\n                `${supportedToken.symbol} (${supportedToken.address})`\n            ]\n        );\n\n        const formItems = [\n            {\n                name: 'token',\n                field: 'select',\n                fieldOptions: {\n                    options: supportedTokenOptions\n                },\n                rules: [\n                    {\n                        message: 'Please select a token!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'value',\n                field: 'number',\n                fieldOptions: currencyFieldOptions(\n                    getUnitByAddress(network.supportedTokens, this.state.token)\n                ),\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a value!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'duration',\n                field: 'number',\n                fieldOptions: dayFieldOptions,\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            }\n        ];\n\n        return (\n            <Modal\n                title=\"Commit Fund\"\n                visible={visible}\n                onOk={this.handleCommitFund}\n                onCancel={onClose}\n            >\n                <Alert\n                    message=\"Your fund will not be available until the commitment expires\"\n                    type=\"warning\"\n                    showIcon\n                />\n                <Form\n                    ref={this.form}\n                    items={formItems}\n                    onValuesChange={this.handleValueChange}\n                />\n            </Modal>\n        );\n    }\n}\n\nCommimentForm.propTypes = {\n    visible: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nCommimentForm.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nexport default CommimentForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { drizzleConnect } from 'drizzle-react';\nimport { Button, Card, List, Statistic, Row, Col, Icon, message } from 'antd';\n\nimport CommimentForm from '../components/polc/commitment-form';\nimport { getUnitByAddress, formatCurrencyValue } from '../utils/unit';\n\nconst DAY = 24 * 60 * 60 * 1000;\n\nconst formatDayTime = day => {\n    const date = day !== '0' ? new Date(_.toNumber(day) * DAY) : new Date();\n    return date.toLocaleDateString();\n};\n\nconst checkLock = day => {\n    return _.toNumber(day) < new Date() / DAY;\n};\n\nclass PoLC extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = { isModalVisible: false };\n        this.contracts = context.drizzle.contracts;\n    }\n\n    toggleModal = () => {\n        this.setState(prevState => ({\n            isModalVisible: !prevState.isModalVisible\n        }));\n    };\n\n    withdrawFund = e => {\n        const { index } = e.currentTarget.dataset;\n        const { PoLC } = this.props;\n        const commitment = _.values(PoLC.commitmentsByUser)[index];\n\n        const { lockEnd } = commitment.value;\n        const [, commitmentId] = commitment.args;\n\n        if (!checkLock(lockEnd)) {\n            message.error('Cannot withdraw fund before expiration');\n            return;\n        }\n        this.contracts.PoLC.methods.withdrawFund.cacheSend(commitmentId);\n    };\n\n    withdrawReward = e => {\n        const { index } = e.currentTarget.dataset;\n        const { PoLC } = this.props;\n        const commitment = _.values(PoLC.commitmentsByUser)[index];\n        const { lockEnd } = commitment.value;\n        const [, commitmentId] = commitment.args;\n\n        if (!checkLock(lockEnd)) {\n            message.error('Cannot withdraw reward before expiration');\n            return;\n        }\n        this.contracts.PoLC.methods.withdrawReward.cacheSend(commitmentId);\n    };\n\n    renderCommitment = (commitment, index) => {\n        const { network } = this.props;\n        const {\n            tokenAddress,\n            lockStart,\n            lockEnd,\n            availableValue,\n            lendingValue\n        } = commitment.value;\n        const unit = getUnitByAddress(network.supportedTokens, tokenAddress);\n\n        return (\n            <List.Item>\n                <Card\n                    actions={[\n                        <Icon\n                            type=\"export\"\n                            title=\"Withdraw Fund\"\n                            data-index={index}\n                            onClick={this.withdrawFund}\n                        />,\n                        <Icon\n                            type=\"dollar\"\n                            title=\"Withdraw Reward\"\n                            data-index={index}\n                            onClick={this.withdrawReward}\n                        />\n                    ]}\n                >\n                    <Row>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Lock Start\"\n                                value={formatDayTime(lockStart)}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Lock End\"\n                                value={formatDayTime(lockEnd)}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Available Value\"\n                                value={formatCurrencyValue(\n                                    availableValue,\n                                    unit\n                                )}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Locked Value\"\n                                value={formatCurrencyValue(lendingValue, unit)}\n                            />\n                        </Col>\n                    </Row>\n                </Card>\n            </List.Item>\n        );\n    };\n\n    renderCommiments = () => {\n        const { PoLC } = this.props;\n        const data = _.values(PoLC.commitmentsByUser);\n\n        return (\n            <List\n                grid={{ gutter: 16, column: 3 }}\n                dataSource={data}\n                renderItem={this.renderCommitment}\n            />\n        );\n    };\n\n    render() {\n        const { isModalVisible } = this.state;\n        const { network } = this.props;\n\n        return (\n            <Card\n                title=\"PoLC\"\n                extra={\n                    <Button type=\"primary\" onClick={this.toggleModal}>\n                        Commit fund\n                    </Button>\n                }\n            >\n                {this.renderCommiments()}\n                <CommimentForm\n                    network={network}\n                    visible={isModalVisible}\n                    onClose={this.toggleModal}\n                />\n            </Card>\n        );\n    }\n}\n\nPoLC.propTypes = {\n    dispatch: PropTypes.func.isRequired\n};\n\nPoLC.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n    const { contracts, network } = state;\n    return {\n        network,\n        PoLC: contracts.PoLC\n    };\n}\n\nexport default drizzleConnect(PoLC, mapStateToProps);\n"],"sourceRoot":""}