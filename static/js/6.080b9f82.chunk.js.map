{"version":3,"sources":["utils/unit.js","utils/constant.js","../node_modules/antd/es/alert/index.js","components/polc/commitment-form.js","routes/polc.js"],"names":["getUnitByAddress","supportedTokens","address","token","_","find","supportedToken","symbol","formatCurrencyValue","value","unit","toNumber","web3","utils","fromWei","formatCelrValue","EMPTY_ADDRESS","_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","this","_defineProperty","defineProperty","enumerable","configurable","writable","_defineProperties","props","descriptor","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","noop","Alert","_React$Component","_this","instance","Constructor","TypeError","_classCallCheck","handleClose","e","preventDefault","dom","style","height","concat","offsetHeight","setState","closing","onClose","animationEnd","closed","afterClose","renderAlert","_ref","_classNames","getPrefixCls","_this$props","description","customizePrefixCls","prefixCls","message","closeText","banner","_this$props$className","className","icon","_this$props2","closable","type","showIcon","iconType","_this$state","state","undefined","iconTheme","alertCls","closeIcon","onClick","tabIndex","dataOrAriaProps","iconNode","theme","component","showProp","transitionName","onEnd","protoProps","staticProps","subClass","superClass","create","_inherits","CommimentForm","context","handleValueChange","changedValue","handleCommitFund","form","current","validateFields","err","values","duration","formatedValue","toWei","toString","sendArgs","push","contracts","PoLC","methods","commitFund","cacheSend","resetFields","React","createRef","drizzle","network","visible","supportedTokenOptions","map","formItems","name","field","fieldOptions","options","placeholder","rules","required","currencyFieldOptions","minValueRule","dayFieldOptions","title","onOk","onCancel","ref","items","onValuesChange","Component","contextTypes","PropTypes","object","formatDayTime","day","Date","toLocaleDateString","checkLock","toggleModal","prevState","isModalVisible","withdrawFund","index","currentTarget","dataset","commitment","commitmentsByUser","lockEnd","commitmentId","args","error","withdrawReward","renderCommitment","tokenAddress","availableValue","lendingValue","Item","actions","data-index","size","span","groupSeparator","renderCommiments","data","grid","gutter","column","dataSource","renderItem","extra","drizzleConnect"],"mappings":"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","file":"static/js/6.080b9f82.chunk.js","sourcesContent":["import _ from 'lodash';\nimport web3 from 'web3';\n\nimport './network';\n\nexport const getUnitByAddress = (supportedTokens, address) => {\n    const token = _.find(\n        supportedTokens,\n        supportedToken => supportedToken.address === address\n    );\n\n    if (!token) {\n        return '';\n    }\n    return token.symbol;\n};\n\nexport const formatCurrencyValue = (value, unit) => {\n    const num = _.toNumber(value);\n\n    if (num < 100000) {\n        return `${value} wei`;\n    }\n\n    return `${web3.utils.fromWei(value)} ${unit}`;\n};\n\nexport const formatCelrValue = value => {\n    return formatCurrencyValue(value, 'CELR');\n};\n","export const EMPTY_ADDRESS = '0x0000000000000000000000000000000000000000';\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Animate from 'rc-animate';\nimport classNames from 'classnames';\nimport Icon from '../icon';\nimport { ConfigConsumer } from '../config-provider';\nimport getDataOrAriaProps from '../_util/getDataOrAriaProps';\nimport warning from '../_util/warning';\n\nfunction noop() {}\n\nvar Alert =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Alert, _React$Component);\n\n  function Alert(props) {\n    var _this;\n\n    _classCallCheck(this, Alert);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Alert).call(this, props));\n\n    _this.handleClose = function (e) {\n      e.preventDefault();\n      var dom = ReactDOM.findDOMNode(_assertThisInitialized(_this));\n      dom.style.height = \"\".concat(dom.offsetHeight, \"px\"); // Magic code\n      // 重复一次后才能正确设置 height\n\n      dom.style.height = \"\".concat(dom.offsetHeight, \"px\");\n\n      _this.setState({\n        closing: true\n      });\n\n      (_this.props.onClose || noop)(e);\n    };\n\n    _this.animationEnd = function () {\n      _this.setState({\n        closing: false,\n        closed: true\n      });\n\n      (_this.props.afterClose || noop)();\n    };\n\n    _this.renderAlert = function (_ref) {\n      var _classNames;\n\n      var getPrefixCls = _ref.getPrefixCls;\n      var _this$props = _this.props,\n          description = _this$props.description,\n          customizePrefixCls = _this$props.prefixCls,\n          message = _this$props.message,\n          closeText = _this$props.closeText,\n          banner = _this$props.banner,\n          _this$props$className = _this$props.className,\n          className = _this$props$className === void 0 ? '' : _this$props$className,\n          style = _this$props.style,\n          icon = _this$props.icon;\n      var _this$props2 = _this.props,\n          closable = _this$props2.closable,\n          type = _this$props2.type,\n          showIcon = _this$props2.showIcon,\n          iconType = _this$props2.iconType;\n      var _this$state = _this.state,\n          closing = _this$state.closing,\n          closed = _this$state.closed;\n      var prefixCls = getPrefixCls('alert', customizePrefixCls); // banner模式默认有 Icon\n\n      showIcon = banner && showIcon === undefined ? true : showIcon; // banner模式默认为警告\n\n      type = banner && type === undefined ? 'warning' : type || 'info';\n      var iconTheme = 'filled';\n\n      if (!iconType) {\n        switch (type) {\n          case 'success':\n            iconType = 'check-circle';\n            break;\n\n          case 'info':\n            iconType = 'info-circle';\n            break;\n\n          case 'error':\n            iconType = 'close-circle';\n            break;\n\n          case 'warning':\n            iconType = 'exclamation-circle';\n            break;\n\n          default:\n            iconType = 'default';\n        } // use outline icon in alert with description\n\n\n        if (description) {\n          iconTheme = 'outlined';\n        }\n      } // closeable when closeText is assigned\n\n\n      if (closeText) {\n        closable = true;\n      }\n\n      var alertCls = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-closing\"), closing), _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-description\"), !!description), _defineProperty(_classNames, \"\".concat(prefixCls, \"-no-icon\"), !showIcon), _defineProperty(_classNames, \"\".concat(prefixCls, \"-banner\"), !!banner), _defineProperty(_classNames, \"\".concat(prefixCls, \"-closable\"), closable), _classNames), className);\n      var closeIcon = closable ? React.createElement(\"button\", {\n        type: \"button\",\n        onClick: _this.handleClose,\n        className: \"\".concat(prefixCls, \"-close-icon\"),\n        tabIndex: 0\n      }, closeText ? React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-close-text\")\n      }, closeText) : React.createElement(Icon, {\n        type: \"close\"\n      })) : null;\n      var dataOrAriaProps = getDataOrAriaProps(_this.props);\n      var iconNode = icon && (React.isValidElement(icon) ? React.cloneElement(icon, {\n        className: classNames(\"\".concat(prefixCls, \"-icon\"), _defineProperty({}, icon.props.className, icon.props.className))\n      }) : React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-icon\")\n      }, icon)) || React.createElement(Icon, {\n        className: \"\".concat(prefixCls, \"-icon\"),\n        type: iconType,\n        theme: iconTheme\n      });\n      return closed ? null : React.createElement(Animate, {\n        component: \"\",\n        showProp: \"data-show\",\n        transitionName: \"\".concat(prefixCls, \"-slide-up\"),\n        onEnd: _this.animationEnd\n      }, React.createElement(\"div\", _extends({\n        \"data-show\": !closing,\n        className: alertCls,\n        style: style\n      }, dataOrAriaProps), showIcon ? iconNode : null, React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-message\")\n      }, message), React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-description\")\n      }, description), closeIcon));\n    };\n\n    warning(!('iconType' in props), 'Alert', '`iconType` is deprecated. Please use `icon` instead.');\n    _this.state = {\n      closing: false,\n      closed: false\n    };\n    return _this;\n  }\n\n  _createClass(Alert, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderAlert);\n    }\n  }]);\n\n  return Alert;\n}(React.Component);\n\nexport { Alert as default };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport web3 from 'web3';\nimport { Alert, Modal } from 'antd';\n\nimport Form from '../form';\nimport { EMPTY_ADDRESS } from '../../utils/constant';\nimport { getUnitByAddress } from '../../utils/unit';\nimport {\n    currencyFieldOptions,\n    dayFieldOptions,\n    minValueRule\n} from '../../utils/form';\n\nclass CommimentForm extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = {};\n        this.form = React.createRef();\n        this.contracts = context.drizzle.contracts;\n    }\n\n    handleValueChange = changedValue => this.setState(changedValue);\n\n    handleCommitFund = () => {\n        const { onClose } = this.props;\n\n        this.form.current.validateFields((err, values) => {\n            if (err) {\n                return;\n            }\n\n            const { token, duration, value } = values;\n            const formatedValue = web3.utils.toWei(value.toString(), 'ether');\n            const sendArgs = [token, duration, formatedValue];\n            if (token === EMPTY_ADDRESS) {\n                sendArgs.push({ value: formatedValue });\n            }\n\n            this.contracts.PoLC.methods.commitFund.cacheSend(...sendArgs);\n            this.form.current.resetFields();\n            onClose();\n        });\n    };\n\n    render() {\n        const { network, visible, onClose } = this.props;\n        const supportedTokenOptions = network.supportedTokens.map(\n            supportedToken => [\n                supportedToken.address,\n                `${supportedToken.symbol} (${supportedToken.address})`\n            ]\n        );\n        const unit = getUnitByAddress(\n            network.supportedTokens,\n            this.state.token\n        );\n\n        const formItems = [\n            {\n                name: 'token',\n                field: 'select',\n                fieldOptions: {\n                    options: supportedTokenOptions,\n                    placeholder: 'Token type to commit'\n                },\n                rules: [\n                    {\n                        message: 'Please select a token!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'value',\n                field: 'number',\n                fieldOptions: {\n                    ...currencyFieldOptions(unit),\n                    placeholder: 'The amount of token to commit'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a value!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'duration',\n                field: 'number',\n                fieldOptions: {\n                    ...dayFieldOptions,\n                    placeholder: 'Lock-in duration'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            }\n        ];\n\n        return (\n            <Modal\n                title=\"Commit Fund\"\n                visible={visible}\n                onOk={this.handleCommitFund}\n                onCancel={onClose}\n            >\n                <Alert\n                    message=\"Your fund will not be available until the commitment expires\"\n                    type=\"warning\"\n                    showIcon\n                />\n                <Form\n                    ref={this.form}\n                    items={formItems}\n                    onValuesChange={this.handleValueChange}\n                />\n            </Modal>\n        );\n    }\n}\n\nCommimentForm.propTypes = {\n    visible: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nCommimentForm.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nexport default CommimentForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { drizzleConnect } from 'drizzle-react';\nimport { Button, Card, List, Statistic, Row, Col, Icon, message } from 'antd';\n\nimport CommimentForm from '../components/polc/commitment-form';\nimport { getUnitByAddress, formatCurrencyValue } from '../utils/unit';\n\nconst DAY = 24 * 60 * 60 * 1000;\n\nconst formatDayTime = day => {\n    const date = day !== '0' ? new Date(_.toNumber(day) * DAY) : new Date();\n    return date.toLocaleDateString();\n};\n\nconst checkLock = day => {\n    return _.toNumber(day) < new Date() / DAY;\n};\n\nclass PoLC extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = { isModalVisible: false };\n        this.contracts = context.drizzle.contracts;\n    }\n\n    toggleModal = () => {\n        this.setState(prevState => ({\n            isModalVisible: !prevState.isModalVisible\n        }));\n    };\n\n    withdrawFund = e => {\n        const { index } = e.currentTarget.dataset;\n        const { PoLC } = this.props;\n        const commitment = _.values(PoLC.commitmentsByUser)[index];\n\n        const { lockEnd } = commitment.value;\n        const [, commitmentId] = commitment.args;\n\n        if (!checkLock(lockEnd)) {\n            message.error('Cannot withdraw fund before expiration');\n            return;\n        }\n        this.contracts.PoLC.methods.withdrawFund.cacheSend(commitmentId);\n    };\n\n    withdrawReward = e => {\n        const { index } = e.currentTarget.dataset;\n        const { PoLC } = this.props;\n        const commitment = _.values(PoLC.commitmentsByUser)[index];\n        const { lockEnd } = commitment.value;\n        const [, commitmentId] = commitment.args;\n\n        if (!checkLock(lockEnd)) {\n            message.error('Cannot withdraw reward before expiration');\n            return;\n        }\n        this.contracts.PoLC.methods.withdrawReward.cacheSend(commitmentId);\n    };\n\n    renderCommitment = (commitment, index) => {\n        const { network } = this.props;\n        const {\n            tokenAddress,\n            lockEnd,\n            availableValue,\n            lendingValue\n        } = commitment.value;\n        const commitmentId = commitment.args[1];\n        const unit = getUnitByAddress(network.supportedTokens, tokenAddress);\n\n        return (\n            <List.Item>\n                <Card\n                    actions={[\n                        <Button\n                            data-index={index}\n                            icon=\"export\"\n                            size=\"small\"\n                            title=\"Withdraw Fund\"\n                            type=\"link\"\n                            onClick={this.withdrawFund}\n                        >\n                            Withdraw\n                        </Button>,\n                        <Button\n                            data-index={index}\n                            icon=\"dollar\"\n                            size=\"small\"\n                            title=\"Withdraw Reward\"\n                            type=\"link\"\n                            onClick={this.withdrawReward}\n                        >\n                            Reward\n                        </Button>\n                    ]}\n                >\n                    <Row>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"ID\"\n                                groupSeparator=\"\"\n                                value={commitmentId}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Lock End\"\n                                value={formatDayTime(lockEnd)}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Available Value\"\n                                value={formatCurrencyValue(\n                                    availableValue,\n                                    unit\n                                )}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Lending Value\"\n                                value={formatCurrencyValue(lendingValue, unit)}\n                            />\n                        </Col>\n                    </Row>\n                </Card>\n            </List.Item>\n        );\n    };\n\n    renderCommiments = () => {\n        const { PoLC } = this.props;\n        const data = _.values(PoLC.commitmentsByUser);\n\n        return (\n            <List\n                grid={{ gutter: 16, column: 3 }}\n                dataSource={data}\n                renderItem={this.renderCommitment}\n            />\n        );\n    };\n\n    render() {\n        const { isModalVisible } = this.state;\n        const { network } = this.props;\n\n        return (\n            <Card\n                title=\"PoLC\"\n                extra={\n                    <Button type=\"primary\" onClick={this.toggleModal}>\n                        Commit fund\n                    </Button>\n                }\n            >\n                {this.renderCommiments()}\n                <CommimentForm\n                    network={network}\n                    visible={isModalVisible}\n                    onClose={this.toggleModal}\n                />\n            </Card>\n        );\n    }\n}\n\nPoLC.propTypes = {\n    dispatch: PropTypes.func.isRequired\n};\n\nPoLC.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n    const { contracts, network } = state;\n    return {\n        network,\n        PoLC: contracts.PoLC\n    };\n}\n\nexport default drizzleConnect(PoLC, mapStateToProps);\n"],"sourceRoot":""}