{"version":3,"sources":["utils/unit.js","utils/constant.js","../node_modules/antd/es/alert/index.js","components/polc/commitment-form.js","routes/polc.js"],"names":["__webpack_require__","d","__webpack_exports__","getUnitByAddress","formatCurrencyValue","formatCelrValue","lodash__WEBPACK_IMPORTED_MODULE_0__","lodash__WEBPACK_IMPORTED_MODULE_0___default","n","web3__WEBPACK_IMPORTED_MODULE_1__","web3__WEBPACK_IMPORTED_MODULE_1___default","supportedTokens","address","token","_","find","supportedToken","symbol","value","unit","toNumber","concat","web3","utils","fromWei","EMPTY_ADDRESS","Alert","react__WEBPACK_IMPORTED_MODULE_0__","react_dom__WEBPACK_IMPORTED_MODULE_1__","rc_animate__WEBPACK_IMPORTED_MODULE_2__","_icon__WEBPACK_IMPORTED_MODULE_3__","classnames__WEBPACK_IMPORTED_MODULE_4__","classnames__WEBPACK_IMPORTED_MODULE_4___default","_config_provider__WEBPACK_IMPORTED_MODULE_5__","_util_getDataOrAriaProps__WEBPACK_IMPORTED_MODULE_6__","_typeof","obj","Symbol","iterator","constructor","prototype","_extends","Object","assign","target","i","arguments","length","source","key","hasOwnProperty","call","apply","this","_defineProperty","defineProperty","enumerable","configurable","writable","_defineProperties","props","descriptor","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_assertThisInitialized","self","ReferenceError","_setPrototypeOf","p","noop","_React$Component","_this","instance","Constructor","TypeError","_classCallCheck","state","closing","closed","handleClose","e","preventDefault","dom","style","height","offsetHeight","setState","onClose","animationEnd","afterClose","renderAlert","_ref","_classNames","_classNames2","getPrefixCls","_this$props","description","customizePrefixCls","prefixCls","message","closeText","banner","_this$props$className","className","icon","_this$props2","closable","type","showIcon","iconType","undefined","iconTheme","alertCls","closeIcon","onClick","dataOrAriaProps","iconNode","theme","component","showProp","transitionName","onEnd","data-show","protoProps","staticProps","subClass","superClass","create","_inherits","CommimentForm","context","classCallCheck","possibleConstructorReturn","handleValueChange","changedValue","handleCommitFund","form","current","validateFields","err","values","_this$contracts$PoLC$","duration","formatedValue","toWei","toString","sendArgs","push","contracts","PoLC","methods","commitFund","cacheSend","resetFields","React","createRef","drizzle","network","visible","supportedTokenOptions","map","formItems","name","field","fieldOptions","options","placeholder","rules","required","objectSpread","currencyFieldOptions","minValueRule","dayFieldOptions","react_default","a","createElement","modal","title","onOk","onCancel","es_alert","components_form","ref","items","onValuesChange","Component","contextTypes","PropTypes","object","formatDayTime","day","Date","toLocaleDateString","checkLock","toggleModal","prevState","isModalVisible","withdrawFund","index","currentTarget","dataset","commitment","commitmentsByUser","lockEnd","commitmentId","slicedToArray","args","error","withdrawReward","renderCommitment","_commitment$value","tokenAddress","availableValue","lendingValue","list","Item","card","actions","es_button","data-index","size","row","col","span","statistic","groupSeparator","renderCommiments","data","grid","gutter","column","dataSource","renderItem","extra","commitment_form","drizzleConnect"],"mappings":"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","file":"static/js/6.c55b8115.chunk.js","sourcesContent":["import _ from 'lodash';\nimport web3 from 'web3';\n\nimport './network';\n\nexport const getUnitByAddress = (supportedTokens, address) => {\n    const token = _.find(\n        supportedTokens,\n        supportedToken => supportedToken.address === address\n    );\n\n    if (!token) {\n        return '';\n    }\n    return token.symbol;\n};\n\nexport const formatCurrencyValue = (value, unit) => {\n    const num = _.toNumber(value);\n\n    if (num < 100000) {\n        return `${value} wei`;\n    }\n\n    return `${web3.utils.fromWei(value)} ${unit}`;\n};\n\nexport const formatCelrValue = value => {\n    return formatCurrencyValue(value, 'CELR');\n};\n","export const EMPTY_ADDRESS = '0x0000000000000000000000000000000000000000';\n","function _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Animate from 'rc-animate';\nimport Icon from '../icon';\nimport classNames from 'classnames';\nimport { ConfigConsumer } from '../config-provider';\nimport getDataOrAriaProps from '../_util/getDataOrAriaProps';\n\nfunction noop() {}\n\nvar Alert =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Alert, _React$Component);\n\n  function Alert() {\n    var _this;\n\n    _classCallCheck(this, Alert);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Alert).apply(this, arguments));\n    _this.state = {\n      closing: true,\n      closed: false\n    };\n\n    _this.handleClose = function (e) {\n      e.preventDefault();\n      var dom = ReactDOM.findDOMNode(_assertThisInitialized(_this));\n      dom.style.height = \"\".concat(dom.offsetHeight, \"px\"); // Magic code\n      // 重复一次后才能正确设置 height\n\n      dom.style.height = \"\".concat(dom.offsetHeight, \"px\");\n\n      _this.setState({\n        closing: false\n      });\n\n      (_this.props.onClose || noop)(e);\n    };\n\n    _this.animationEnd = function () {\n      _this.setState({\n        closed: true,\n        closing: true\n      });\n\n      (_this.props.afterClose || noop)();\n    };\n\n    _this.renderAlert = function (_ref) {\n      var _classNames, _classNames2;\n\n      var getPrefixCls = _ref.getPrefixCls;\n      var _this$props = _this.props,\n          description = _this$props.description,\n          customizePrefixCls = _this$props.prefixCls,\n          message = _this$props.message,\n          closeText = _this$props.closeText,\n          banner = _this$props.banner,\n          _this$props$className = _this$props.className,\n          className = _this$props$className === void 0 ? '' : _this$props$className,\n          style = _this$props.style,\n          icon = _this$props.icon;\n      var _this$props2 = _this.props,\n          closable = _this$props2.closable,\n          type = _this$props2.type,\n          showIcon = _this$props2.showIcon,\n          iconType = _this$props2.iconType;\n      var prefixCls = getPrefixCls('alert', customizePrefixCls); // banner模式默认有 Icon\n\n      showIcon = banner && showIcon === undefined ? true : showIcon; // banner模式默认为警告\n\n      type = banner && type === undefined ? 'warning' : type || 'info';\n      var iconTheme = 'filled'; // should we give a warning?\n      // warning(!iconType, `The property 'iconType' is deprecated. Use the property 'icon' instead.`);\n\n      if (!iconType) {\n        switch (type) {\n          case 'success':\n            iconType = 'check-circle';\n            break;\n\n          case 'info':\n            iconType = 'info-circle';\n            break;\n\n          case 'error':\n            iconType = 'close-circle';\n            break;\n\n          case 'warning':\n            iconType = 'exclamation-circle';\n            break;\n\n          default:\n            iconType = 'default';\n        } // use outline icon in alert with description\n\n\n        if (!!description) {\n          iconTheme = 'outlined';\n        }\n      } // closeable when closeText is assigned\n\n\n      if (closeText) {\n        closable = true;\n      }\n\n      var alertCls = classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(type), (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-close\"), !_this.state.closing), _defineProperty(_classNames, \"\".concat(prefixCls, \"-with-description\"), !!description), _defineProperty(_classNames, \"\".concat(prefixCls, \"-no-icon\"), !showIcon), _defineProperty(_classNames, \"\".concat(prefixCls, \"-banner\"), !!banner), _defineProperty(_classNames, \"\".concat(prefixCls, \"-closable\"), closable), _classNames), className);\n      var closeIcon = closable ? React.createElement(\"a\", {\n        onClick: _this.handleClose,\n        className: \"\".concat(prefixCls, \"-close-icon\")\n      }, closeText || React.createElement(Icon, {\n        type: \"close\"\n      })) : null;\n      var dataOrAriaProps = getDataOrAriaProps(_this.props);\n      var iconNode = icon && (React.isValidElement(icon) ? React.cloneElement(icon, {\n        className: classNames((_classNames2 = {}, _defineProperty(_classNames2, icon.props.className, icon.props.className), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-icon\"), true), _classNames2))\n      }) : React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-icon\")\n      }, icon)) || React.createElement(Icon, {\n        className: \"\".concat(prefixCls, \"-icon\"),\n        type: iconType,\n        theme: iconTheme\n      });\n      return _this.state.closed ? null : React.createElement(Animate, {\n        component: \"\",\n        showProp: \"data-show\",\n        transitionName: \"\".concat(prefixCls, \"-slide-up\"),\n        onEnd: _this.animationEnd\n      }, React.createElement(\"div\", _extends({\n        \"data-show\": _this.state.closing,\n        className: alertCls,\n        style: style\n      }, dataOrAriaProps), showIcon ? iconNode : null, React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-message\")\n      }, message), React.createElement(\"span\", {\n        className: \"\".concat(prefixCls, \"-description\")\n      }, description), closeIcon));\n    };\n\n    return _this;\n  }\n\n  _createClass(Alert, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ConfigConsumer, null, this.renderAlert);\n    }\n  }]);\n\n  return Alert;\n}(React.Component);\n\nexport { Alert as default };","import React from 'react';\nimport PropTypes from 'prop-types';\nimport web3 from 'web3';\nimport { Alert, Modal } from 'antd';\n\nimport Form from '../form';\nimport { EMPTY_ADDRESS } from '../../utils/constant';\nimport { getUnitByAddress } from '../../utils/unit';\nimport {\n    currencyFieldOptions,\n    dayFieldOptions,\n    minValueRule\n} from '../../utils/form';\n\nclass CommimentForm extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = {};\n        this.form = React.createRef();\n        this.contracts = context.drizzle.contracts;\n    }\n\n    handleValueChange = changedValue => this.setState(changedValue);\n\n    handleCommitFund = () => {\n        const { onClose } = this.props;\n\n        this.form.current.validateFields((err, values) => {\n            if (err) {\n                return;\n            }\n\n            const { token, duration, value } = values;\n            const formatedValue = web3.utils.toWei(value.toString(), 'ether');\n            const sendArgs = [token, duration, formatedValue];\n            if (token === EMPTY_ADDRESS) {\n                sendArgs.push({ value: formatedValue });\n            }\n\n            this.contracts.PoLC.methods.commitFund.cacheSend(...sendArgs);\n            this.form.current.resetFields();\n            onClose();\n        });\n    };\n\n    render() {\n        const { network, visible, onClose } = this.props;\n        const supportedTokenOptions = network.supportedTokens.map(\n            supportedToken => [\n                supportedToken.address,\n                `${supportedToken.symbol} (${supportedToken.address})`\n            ]\n        );\n        const unit = getUnitByAddress(\n            network.supportedTokens,\n            this.state.token\n        );\n\n        const formItems = [\n            {\n                name: 'token',\n                field: 'select',\n                fieldOptions: {\n                    options: supportedTokenOptions,\n                    placeholder: 'Token type to commit'\n                },\n                rules: [\n                    {\n                        message: 'Please select a token!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'value',\n                field: 'number',\n                fieldOptions: {\n                    ...currencyFieldOptions(unit),\n                    placeholder: 'The amount of token to commit'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a value!',\n                        required: true\n                    }\n                ]\n            },\n            {\n                name: 'duration',\n                field: 'number',\n                fieldOptions: {\n                    ...dayFieldOptions,\n                    placeholder: 'Lock-in duration'\n                },\n                rules: [\n                    minValueRule(0),\n                    {\n                        message: 'Please enter a duration!',\n                        required: true\n                    }\n                ]\n            }\n        ];\n\n        return (\n            <Modal\n                title=\"Commit Fund\"\n                visible={visible}\n                onOk={this.handleCommitFund}\n                onCancel={onClose}\n            >\n                <Alert\n                    message=\"Your fund will not be available until the commitment expires\"\n                    type=\"warning\"\n                    showIcon\n                />\n                <Form\n                    ref={this.form}\n                    items={formItems}\n                    onValuesChange={this.handleValueChange}\n                />\n            </Modal>\n        );\n    }\n}\n\nCommimentForm.propTypes = {\n    visible: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nCommimentForm.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nexport default CommimentForm;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { drizzleConnect } from 'drizzle-react';\nimport { Button, Card, List, Statistic, Row, Col, Icon, message } from 'antd';\n\nimport CommimentForm from '../components/polc/commitment-form';\nimport { getUnitByAddress, formatCurrencyValue } from '../utils/unit';\n\nconst DAY = 24 * 60 * 60 * 1000;\n\nconst formatDayTime = day => {\n    const date = day !== '0' ? new Date(_.toNumber(day) * DAY) : new Date();\n    return date.toLocaleDateString();\n};\n\nconst checkLock = day => {\n    return _.toNumber(day) < new Date() / DAY;\n};\n\nclass PoLC extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = { isModalVisible: false };\n        this.contracts = context.drizzle.contracts;\n    }\n\n    toggleModal = () => {\n        this.setState(prevState => ({\n            isModalVisible: !prevState.isModalVisible\n        }));\n    };\n\n    withdrawFund = e => {\n        const { index } = e.currentTarget.dataset;\n        const { PoLC } = this.props;\n        const commitment = _.values(PoLC.commitmentsByUser)[index];\n\n        const { lockEnd } = commitment.value;\n        const [, commitmentId] = commitment.args;\n\n        if (!checkLock(lockEnd)) {\n            message.error('Cannot withdraw fund before expiration');\n            return;\n        }\n        this.contracts.PoLC.methods.withdrawFund.cacheSend(commitmentId);\n    };\n\n    withdrawReward = e => {\n        const { index } = e.currentTarget.dataset;\n        const { PoLC } = this.props;\n        const commitment = _.values(PoLC.commitmentsByUser)[index];\n        const { lockEnd } = commitment.value;\n        const [, commitmentId] = commitment.args;\n\n        if (!checkLock(lockEnd)) {\n            message.error('Cannot withdraw reward before expiration');\n            return;\n        }\n        this.contracts.PoLC.methods.withdrawReward.cacheSend(commitmentId);\n    };\n\n    renderCommitment = (commitment, index) => {\n        const { network } = this.props;\n        const {\n            tokenAddress,\n            lockEnd,\n            availableValue,\n            lendingValue\n        } = commitment.value;\n        const commitmentId = commitment.args[1];\n        const unit = getUnitByAddress(network.supportedTokens, tokenAddress);\n\n        return (\n            <List.Item>\n                <Card\n                    actions={[\n                        <Button\n                            data-index={index}\n                            icon=\"export\"\n                            size=\"small\"\n                            title=\"Withdraw Fund\"\n                            type=\"link\"\n                            onClick={this.withdrawFund}\n                        >\n                            Withdraw\n                        </Button>,\n                        <Button\n                            data-index={index}\n                            icon=\"dollar\"\n                            size=\"small\"\n                            title=\"Withdraw Reward\"\n                            type=\"link\"\n                            onClick={this.withdrawReward}\n                        >\n                            Reward\n                        </Button>\n                    ]}\n                >\n                    <Row>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"ID\"\n                                groupSeparator=\"\"\n                                value={commitmentId}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Lock End\"\n                                value={formatDayTime(lockEnd)}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Available Value\"\n                                value={formatCurrencyValue(\n                                    availableValue,\n                                    unit\n                                )}\n                            />\n                        </Col>\n                        <Col span={12}>\n                            <Statistic\n                                title=\"Lending Value\"\n                                value={formatCurrencyValue(lendingValue, unit)}\n                            />\n                        </Col>\n                    </Row>\n                </Card>\n            </List.Item>\n        );\n    };\n\n    renderCommiments = () => {\n        const { PoLC } = this.props;\n        const data = _.values(PoLC.commitmentsByUser);\n\n        return (\n            <List\n                grid={{ gutter: 16, column: 3 }}\n                dataSource={data}\n                renderItem={this.renderCommitment}\n            />\n        );\n    };\n\n    render() {\n        const { isModalVisible } = this.state;\n        const { network } = this.props;\n\n        return (\n            <Card\n                title=\"PoLC\"\n                extra={\n                    <Button type=\"primary\" onClick={this.toggleModal}>\n                        Commit fund\n                    </Button>\n                }\n            >\n                {this.renderCommiments()}\n                <CommimentForm\n                    network={network}\n                    visible={isModalVisible}\n                    onClose={this.toggleModal}\n                />\n            </Card>\n        );\n    }\n}\n\nPoLC.propTypes = {\n    dispatch: PropTypes.func.isRequired\n};\n\nPoLC.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n    const { contracts, network } = state;\n    return {\n        network,\n        PoLC: contracts.PoLC\n    };\n}\n\nexport default drizzleConnect(PoLC, mapStateToProps);\n"],"sourceRoot":""}