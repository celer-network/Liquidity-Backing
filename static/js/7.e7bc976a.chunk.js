(this["webpackJsonptruffle-react-redux-dapp"]=this["webpackJsonptruffle-react-redux-dapp"]||[]).push([[7],{822:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return o}));var a="0x0000000000000000000000000000000000000000",r=3,o=Math.pow(10,r)},834:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(0),r=n(8),o=n(47),c=n(3),i=n.n(c),l=n(11),s=n(114),u=n(250),d=n(15);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(){}var g=function(e){function t(e){var n,c,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c=this,s=h(t).call(this,e),(n=!s||"object"!==m(s)&&"function"!==typeof s?v(c):s).handleClose=function(e){e.preventDefault();var t=r.findDOMNode(v(n));t.style.height="".concat(t.offsetHeight,"px"),t.style.height="".concat(t.offsetHeight,"px"),n.setState({closing:!0}),(n.props.onClose||y)(e)},n.animationEnd=function(){n.setState({closing:!1,closed:!0}),(n.props.afterClose||y)()},n.renderAlert=function(e){var t,r=e.getPrefixCls,c=n.props,s=c.description,d=c.prefixCls,m=c.message,b=c.closeText,h=c.banner,v=c.className,w=void 0===v?"":v,y=c.style,g=c.icon,O=n.props,E=O.closable,C=O.type,k=O.showIcon,j=O.iconType,x=n.state,P=x.closing,S=x.closed,N=r("alert",d);k=!(!h||void 0!==k)||k,C=h&&void 0===C?"warning":C||"info";var T="filled";if(!j){switch(C){case"success":j="check-circle";break;case"info":j="info-circle";break;case"error":j="close-circle";break;case"warning":j="exclamation-circle";break;default:j="default"}s&&(T="outlined")}b&&(E=!0);var z=i()(N,"".concat(N,"-").concat(C),(f(t={},"".concat(N,"-closing"),P),f(t,"".concat(N,"-with-description"),!!s),f(t,"".concat(N,"-no-icon"),!k),f(t,"".concat(N,"-banner"),!!h),f(t,"".concat(N,"-closable"),E),t),w),L=E?a.createElement("button",{type:"button",onClick:n.handleClose,className:"".concat(N,"-close-icon"),tabIndex:0},b?a.createElement("span",{className:"".concat(N,"-close-text")},b):a.createElement(l.a,{type:"close"})):null,V=Object(u.a)(n.props),F=g&&(a.isValidElement(g)?a.cloneElement(g,{className:i()("".concat(N,"-icon"),f({},g.props.className,g.props.className))}):a.createElement("span",{className:"".concat(N,"-icon")},g))||a.createElement(l.a,{className:"".concat(N,"-icon"),type:j,theme:T});return S?null:a.createElement(o.a,{component:"",showProp:"data-show",transitionName:"".concat(N,"-slide-up"),onEnd:n.animationEnd},a.createElement("div",p({"data-show":!P,className:z,style:y},V),k?F:null,a.createElement("span",{className:"".concat(N,"-message")},m),a.createElement("span",{className:"".concat(N,"-description")},s),L))},Object(d.a)(!("iconType"in e),"Alert","`iconType` is deprecated. Please use `icon` instead."),n.state={closing:!1,closed:!1},n}var n,c,g;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),n=t,(c=[{key:"render",value:function(){return a.createElement(s.a,null,this.renderAlert)}}])&&b(n.prototype,c),g&&b(n,g),t}(a.Component)},886:function(e,t,n){"use strict";n.r(t);var a=n(249),r=n(72),o=n(73),c=n(75),i=n(74),l=n(76),s=n(0),u=n.n(s),d=n(1),m=n.n(d),p=n(44),f=n.n(p),b=n(118),h=n(818),v=n(884),w=n(821),y=n(69),g=n(113),O=n(57),E=n(820),C=n(39),k=n(117),j=n.n(k),x=n(814),P=n(834),S=n(247),N=n(822),T=n(245),z=n(246),L=function(e){function t(e,n){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).handleValueChange=function(e){return a.setState(e)},a.handleCommitFund=function(){var e=a.props.onClose;a.form.current.validateFields((function(t,n){var r;if(!t){var o=n.token,c=n.duration,i=n.value,l=j.a.utils.toWei(i.toString(),"ether"),s=[o,c,l];o===N.a&&s.push({value:l}),(r=a.contracts.PoLC.methods.commitFund).cacheSend.apply(r,s),a.form.current.resetFields(),e()}}))},a.state={},a.form=u.a.createRef(),a.contracts=n.drizzle.contracts,a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.network,n=e.visible,a=e.onClose,r=t.supportedTokens.map((function(e){return[e.address,"".concat(e.symbol," (").concat(e.address,")")]})),o=Object(T.c)(t.supportedTokens,this.state.token),c=[{name:"token",field:"select",fieldOptions:{options:r,placeholder:"Token type to commit"},rules:[{message:"Please select a token!",required:!0}]},{name:"value",field:"number",fieldOptions:Object(C.a)({},Object(z.c)(o),{placeholder:"The amount of token to commit"}),rules:[Object(z.e)(0),{message:"Please enter a value!",required:!0}]},{name:"duration",field:"number",fieldOptions:Object(C.a)({},z.d,{placeholder:"Lock-in duration"}),rules:[Object(z.e)(0),{message:"Please enter a duration!",required:!0}]}];return u.a.createElement(x.a,{title:"Commit Fund",visible:n,onOk:this.handleCommitFund,onCancel:a},u.a.createElement(P.a,{message:"Your fund will not be available until the commitment expires",type:"warning",showIcon:!0}),u.a.createElement(S.a,{ref:this.form,items:c,onValuesChange:this.handleValueChange}))}}]),t}(u.a.Component);L.contextTypes={drizzle:m.a.object};var V=L,F=function(e){return("0"!==e?new Date(864e5*f.a.toNumber(e)):new Date).toLocaleDateString()},M=function(e){return f.a.toNumber(e)<new Date/864e5},_=function(e){function t(e,n){var o;return Object(r.a)(this,t),(o=Object(c.a)(this,Object(i.a)(t).call(this,e))).toggleModal=function(){o.setState((function(e){return{isModalVisible:!e.isModalVisible}}))},o.withdrawFund=function(e){var t=e.currentTarget.dataset.index,n=o.props.PoLC,r=f.a.values(n.commitmentsByUser)[t],c=r.value.lockEnd,i=Object(a.a)(r.args,2)[1];M(c)?o.contracts.PoLC.methods.withdrawFund.cacheSend(i):h.a.error("Cannot withdraw fund before expiration")},o.withdrawReward=function(e){var t=e.currentTarget.dataset.index,n=o.props.PoLC,r=f.a.values(n.commitmentsByUser)[t],c=r.value.lockEnd,i=Object(a.a)(r.args,2)[1];M(c)?o.contracts.PoLC.methods.withdrawReward.cacheSend(i):h.a.error("Cannot withdraw reward before expiration")},o.renderCommitment=function(e,t){var n=o.props.network,a=e.value,r=a.tokenAddress,c=a.lockEnd,i=a.availableValue,l=a.lendingValue,s=e.args[1],d=Object(T.c)(n.supportedTokens,r);return u.a.createElement(v.a.Item,null,u.a.createElement(w.a,{actions:[u.a.createElement(y.a,{"data-index":t,icon:"export",size:"small",title:"Withdraw Fund",type:"link",onClick:o.withdrawFund},"Withdraw"),u.a.createElement(y.a,{"data-index":t,icon:"dollar",size:"small",title:"Withdraw Reward",type:"link",onClick:o.withdrawReward},"Reward")]},u.a.createElement(g.a,null,u.a.createElement(O.a,{span:12},u.a.createElement(E.a,{title:"ID",groupSeparator:"",value:s})),u.a.createElement(O.a,{span:12},u.a.createElement(E.a,{title:"Lock End",value:F(c)})),u.a.createElement(O.a,{span:12},u.a.createElement(E.a,{title:"Available Value",value:Object(T.b)(i,d)})),u.a.createElement(O.a,{span:12},u.a.createElement(E.a,{title:"Lending Value",value:Object(T.b)(l,d)})))))},o.renderCommiments=function(){var e=o.props.PoLC,t=f.a.values(e.commitmentsByUser);return u.a.createElement(v.a,{grid:{gutter:16,column:3},dataSource:t,renderItem:o.renderCommitment})},o.state={isModalVisible:!1},o.contracts=n.drizzle.contracts,o}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.isModalVisible,t=this.props.network;return u.a.createElement(w.a,{title:"Fund",extra:u.a.createElement(y.a,{type:"primary",onClick:this.toggleModal},"Commit fund")},this.renderCommiments(),u.a.createElement(V,{network:t,visible:e,onClose:this.toggleModal}))}}]),t}(u.a.Component);_.contextTypes={drizzle:m.a.object};t.default=Object(b.drizzleConnect)(_,(function(e){var t=e.contracts;return{network:e.network,PoLC:t.PoLC}}))}}]);
//# sourceMappingURL=7.e7bc976a.chunk.js.map