{"version":3,"sources":["utils/network.js","utils/contracts.js","utils/unit.js","utils/form.js","components/form.js","components/select.js","components/approve-celr.js","components/account-info.js","utils/subscribe.js","App.js","router.js","models/polc.js","models/liba.js","models/network.js","index.js"],"names":["networkConfigs","localNetworkConfig","supportedTokens","symbol","address","getNetworkConfig","networkID","checkNetworkCompatbility","networkVersion","window","web3","currentProvider","Modal","error","title","content","contractOptions","block","fallback","type","url","contracts","PoLC","LiBA","ERC20","polls","accounts","blocks","getUnitByAddress","token","_","find","supportedToken","formatCurrencyValue","value","unit","toNumber","utils","fromWei","formatCelrValue","currencyFieldOptions","formatter","parser","replace","celerFieldOptions","dayFieldOptions","blockFieldOptions","timeEstimate","formatDistanceToNow","Date","now","rateFieldOptions","minValueRule","minValue","validator","rule","callback","FormItem","Form","Item","buttonLayout","wrapperCol","sm","span","offset","xs","FIELD_MAP","date","DatePicker","input","Input","number","InputNumber","text","TextArea","select","Select","CustomizeForm","handleSubmit","e","props","form","onSubmit","preventDefault","validateFields","err","values","renderFormItems","formItemLayout","items","getFieldDecorator","console","log","map","item","field","fieldOptions","initialValue","label","name","rules","Field","decoratorOptions","getValueFromEvent","args","fileList","target","checked","key","capitalize","this","submitText","noop","htmlType","React","Component","defaultProps","labelCol","create","onValuesChange","changedValues","Option","allowClear","disabled","optionFilterProp","placeholder","state","undefined","onChange","setState","getValue","defaultValue","renderOptions","options","omit","isNil","showSearch","ApproveCelrForm","context","onClose","current","ERC20ExampleToken","methods","approve","toWei","toString","send","createRef","drizzle","visible","formItems","message","required","onOk","onCancel","ref","contextTypes","PropTypes","object","AccountInfo","celrValue","className","getCelrAllowance","account","allowance","cacheCall","Sider","Layout","Content","Footer","App","toggleModal","prevState","isModalVisible","dispatch","events","NewCommitment","fromBlock","filter","user","event","returnValues","commitmentId","commitmentsByUser","NewAuction","auctionId","getAuction","getAuctionPeriod","NewBid","bidder","payload","Approval","owner","spender","subscribeEvent","blockNumber","selectedAddress","setInterval","location","reload","eth","getBlock","then","subscribeChainInfo","children","CelrToken","pathname","celerAllowance","theme","mode","selectedKeys","slice","to","onClick","style","textAlign","withRouter","drizzleConnect","ConnectedRouter","routerRedux","LoadingWrapper","LoadingContainer","redirectToHome","RouterConfig","history","app","Dynamic","component","Auction","store","_store","loadingComp","Spin","exact","path","render","namespace","effects","reducers","save","action","addBid","bids","rootSaga","all","drizzleSagas","saga","fork","dva","initialState","generateContractsInitialState","extraReducers","drizzleReducers","onError","resp","msg","srv","use","createLoading","model","PoLCModel","LiBAModel","NetworkModel","router","require","default","start","runSaga"],"mappings":"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","file":"static/js/main.f75f3f17.chunk.js","sourcesContent":["import { Modal } from 'antd';\n\nconst MAINNET = '1';\nconst ROPSTEN = '3';\n\nconst networkConfigs = {};\n\nconst localNetworkConfig = {\n    supportedTokens: [\n        {\n            symbol: 'ETH',\n            address: '0x0000000000000000000000000000000000000000'\n        }\n    ]\n};\n\nexport const getNetworkConfig = networkID => {\n    if (networkConfigs[networkID]) {\n        return networkConfigs[networkID];\n    }\n\n    return localNetworkConfig;\n};\n\nexport const checkNetworkCompatbility = () => {\n    if (process.env.NODE_ENV === 'development') {\n        return;\n    }\n\n    const networkVersion = window.web3.currentProvider.networkVersion;\n    if (networkVersion !== MAINNET && networkVersion !== ROPSTEN) {\n        Modal.error({\n            title: 'Current network is not supported',\n            content: 'Please switch to mainnet or ropsten'\n        });\n    }\n};\n","import PoLC from './../contracts/PoLC.json';\nimport LiBA from './../contracts/LiBA.json';\nimport ERC20 from './../contracts/ERC20ExampleToken.json';\n\n// let drizzle know what contracts we want\nconst contractOptions = {\n    web3: {\n        block: false,\n        fallback: {\n            type: 'ws',\n            url: 'ws://localhost:8545'\n        }\n    },\n    contracts: [PoLC, LiBA, ERC20],\n    polls: {\n        accounts: 1000,\n        blocks: 1000\n    }\n};\n\nexport default contractOptions;\n","import _ from 'lodash';\nimport web3 from 'web3';\n\nimport './network';\n\nexport const getUnitByAddress = (supportedTokens, address) => {\n    const token = _.find(\n        supportedTokens,\n        supportedToken => supportedToken.address === address\n    );\n\n    if (!token) {\n        return '';\n    }\n    return token.symbol;\n};\n\nexport const formatCurrencyValue = (value, unit) => {\n    if (!value) {\n        return;\n    }\n\n    const num = _.toNumber(value);\n\n    if (num < 100000) {\n        return `${value} wei`;\n    }\n\n    return `${web3.utils.fromWei(value)} ${unit}`;\n};\n\nexport const formatCelrValue = value => {\n    return formatCurrencyValue(value, 'CELR');\n};\n","import formatDistanceToNow from 'date-fns/formatDistanceToNow';\n\nconst BLOCK_INTERVAL = 15000;\n\nexport const currencyFieldOptions = unit => ({\n    formatter: value => (value ? `${value}${unit}` : ''),\n    parser: value => value.replace(/[\\D]/g, '')\n});\n\nexport const celerFieldOptions = currencyFieldOptions('CELR');\n\nexport const dayFieldOptions = {\n    formatter: value => (value ? `${value}day` : ''),\n    parser: value => value.replace(/[\\D]/g, '')\n};\n\nexport const blockFieldOptions = {\n    formatter: value => {\n        if (!value) {\n            return '';\n        }\n\n        const timeEstimate = formatDistanceToNow(\n            new Date(Date.now() + value * BLOCK_INTERVAL)\n        );\n\n        return `${value}blocks(${timeEstimate})`;\n    },\n    parser: value => value.replace(/\\([\\w\\s]+\\)?/, '').replace(/[\\D]/g, '')\n};\n\nexport const rateFieldOptions = {\n    formatter: value => (value ? `${value}%` : ''),\n    parser: value => value.replace(/[^\\d.]/g, '')\n};\n\nexport const minValueRule = minValue => ({\n    validator: (rule, value, callback) => {\n        if (value < minValue) {\n            const msg = `value is smaller than ${minValue}`;\n            callback(msg);\n        }\n\n        callback();\n    }\n});\n","import React from 'react';\nimport _ from 'lodash';\nimport { Button, DatePicker, Form, Input, InputNumber } from 'antd';\n\nimport Select from './select';\n\nconst FormItem = Form.Item;\n\nconst defaultFormItemLayout = {\n    labelCol: {\n        sm: { span: 8 },\n        xs: { span: 24 }\n    },\n\n    wrapperCol: {\n        sm: { span: 16 },\n        xs: { span: 24 }\n    }\n};\n\nconst buttonLayout = {\n    wrapperCol: {\n        sm: { span: 3, offset: 21 },\n        xs: { span: 24 }\n    }\n};\n\nconst FIELD_MAP = {\n    date: DatePicker,\n    input: Input,\n    number: InputNumber,\n    text: Input.TextArea,\n    select: Select\n};\n\nclass CustomizeForm extends React.Component {\n    handleSubmit = e => {\n        const { form, onSubmit } = this.props;\n        e.preventDefault();\n        form.validateFields((err, values) => {\n            if (!err) {\n                onSubmit(values);\n            }\n        });\n    };\n\n    renderFormItems = () => {\n        const { form, formItemLayout, items } = this.props;\n        const { getFieldDecorator } = form;\n\n        console.log(items);\n        return _.map(items, item => {\n            const {\n                field = 'input',\n                fieldOptions,\n                initialValue,\n                label,\n                name,\n                rules\n            } = item;\n            const Field = FIELD_MAP[field];\n            const decoratorOptions = {\n                initialValue,\n                rules,\n                getValueFromEvent(...args) {\n                    if (field === 'file') {\n                        return args[0].fileList;\n                    }\n\n                    const [e] = args;\n                    if (!e || !e.target) {\n                        return e;\n                    }\n\n                    const { target } = e;\n                    return target.type === 'checkbox'\n                        ? target.checked\n                        : target.value;\n                }\n            };\n\n            return (\n                <FormItem\n                    key={name}\n                    {...formItemLayout}\n                    label={!label ? _.capitalize(name) : label}\n                >\n                    {getFieldDecorator(name, decoratorOptions)(\n                        <Field {...fieldOptions} />\n                    )}\n                </FormItem>\n            );\n        });\n    };\n\n    render() {\n        const { onSubmit, submitText } = this.props;\n        return (\n            <Form onSubmit={this.handleSubmit}>\n                {this.renderFormItems()}\n                {onSubmit !== _.noop && (\n                    <FormItem {...buttonLayout}>\n                        <Button htmlType=\"submit\" type=\"primary\">\n                            {submitText}\n                        </Button>\n                    </FormItem>\n                )}\n            </Form>\n        );\n    }\n}\n\nCustomizeForm.defaultProps = {\n    formItemLayout: defaultFormItemLayout,\n    onSubmit: _.noop,\n    submitText: 'Save'\n};\n\nexport default Form.create({\n    onValuesChange(props, changedValues) {\n        if (props.onValuesChange) {\n            props.onValuesChange(changedValues);\n        }\n    }\n})(CustomizeForm);\n","import React from 'react';\nimport { Select } from 'antd';\nimport _ from 'lodash';\n\nconst Option = Select.Option;\n\nexport default class extends React.Component {\n    defaultProps = {\n        allowClear: true,\n        disabled: false,\n        optionFilterProp: 'children',\n        placeholder: ''\n    };\n\n    state = { value: undefined };\n\n    onChange = (value: ValueType) => this.setState({ value });\n\n    getValue = () => {\n        const { defaultValue } = this.props;\n        const { value } = this.state;\n        return value || defaultValue;\n    };\n\n    renderOptions = () => {\n        const { options } = this.props;\n        return _.map(options, ([value, text]) => (\n            <Option key={value} value={value}>\n                {text}\n            </Option>\n        ));\n    };\n\n    render() {\n        const { defaultValue } = this.props;\n        const props = {\n            ..._.omit(this.props, ['options', 'defaultValue'])\n        };\n\n        if (!props.onChange) {\n            props.onChange = this.onChange;\n        }\n        if (!_.isNil(defaultValue)) {\n            props.defaultValue = defaultValue;\n        }\n\n        return (\n            <Select {...props} showSearch={true}>\n                {this.renderOptions()}\n            </Select>\n        );\n    }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport web3 from 'web3';\nimport { Modal } from 'antd';\n\nimport Form from './form';\nimport { celerFieldOptions } from '../utils/form';\n\nclass ApproveCelrForm extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.form = React.createRef();\n        this.contracts = context.drizzle.contracts;\n    }\n\n    onSubmit = () => {\n        const { onClose } = this.props;\n\n        this.form.current.validateFields((err, values) => {\n            if (err) {\n                return;\n            }\n\n            const { value } = values;\n\n            this.contracts.ERC20ExampleToken.methods\n                .approve(\n                    this.contracts.LiBA.address,\n                    web3.utils.toWei(value.toString(), 'ether')\n                )\n                .send();\n\n            onClose();\n        });\n    };\n\n    render() {\n        const { visible, onClose } = this.props;\n        const formItems = [\n            {\n                name: 'value',\n                field: 'number',\n                fieldOptions: {\n                    ...celerFieldOptions,\n                    placeholder: 'The amount of CELR allowance LiBA has'\n                },\n                rules: [\n                    {\n                        message: 'Please enter a value!',\n                        required: true\n                    }\n                ]\n            }\n        ];\n\n        return (\n            <Modal\n                title=\"Approve CELR to LiBA\"\n                visible={visible}\n                onOk={this.onSubmit}\n                onCancel={onClose}\n            >\n                <Form ref={this.form} items={formItems} />\n            </Modal>\n        );\n    }\n}\n\nApproveCelrForm.propTypes = {\n    visible: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired\n};\n\nApproveCelrForm.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nexport default ApproveCelrForm;\n","import React from 'react';\nimport { Card, Statistic } from 'antd';\n\nimport { formatCelrValue } from '../utils/unit';\n\nfunction AccountInfo(props) {\n    const { celrValue } = props;\n\n    return (\n        <Card className=\"account-info\" title=\"Account info\">\n            <Statistic\n                title=\"CELR allowance\"\n                value={formatCelrValue(celrValue)}\n            />\n        </Card>\n    );\n}\n\nexport default AccountInfo;\n","const POLL_INTERVAL = 1000;\n\nexport const subscribeEvent = (account, contracts, dispatch) => {\n    const { PoLC, LiBA, ERC20ExampleToken } = contracts;\n\n    PoLC.events.NewCommitment(\n        {\n            fromBlock: 0,\n            filter: {\n                user: account\n            }\n        },\n        (err, event) => {\n            if (err) {\n                return;\n            }\n\n            const { commitmentId, user } = event.returnValues;\n            PoLC.methods.commitmentsByUser.cacheCall(user, commitmentId);\n        }\n    );\n\n    LiBA.events.NewAuction(\n        {\n            fromBlock: 0\n        },\n        (err, event) => {\n            if (err) {\n                return;\n            }\n\n            const { auctionId } = event.returnValues;\n            LiBA.methods.getAuction.cacheCall(auctionId);\n            LiBA.methods.getAuctionPeriod.cacheCall(auctionId);\n        }\n    );\n\n    LiBA.events.NewBid(\n        {\n            fromBlock: 0,\n            filter: {\n                bidder: account\n            }\n        },\n        (err, event) => {\n            if (err) {\n                return;\n            }\n\n            const { auctionId } = event.returnValues;\n            dispatch({\n                type: 'LiBA/addBid',\n                payload: { auctionId }\n            });\n        }\n    );\n\n    ERC20ExampleToken.events.Approval(\n        {\n            filter: {\n                owner: account,\n                spender: LiBA.address\n            }\n        },\n        (err, event) => {\n            if (err) {\n                return;\n            }\n\n            getCelrAllowance(account, contracts);\n        }\n    );\n\n    getCelrAllowance(account, contracts);\n};\n\nexport const subscribeChainInfo = (web3, dispatch) => {\n    const account = web3.currentProvider.selectedAddress;\n    let blockNumber;\n\n    setInterval(() => {\n        if (account !== web3.currentProvider.selectedAddress) {\n            window.location.reload();\n        }\n\n        return web3.eth.getBlock('latest').then(block => {\n            if (block && blockNumber !== block.number) {\n                dispatch({\n                    type: 'network/save',\n                    payload: { block }\n                });\n                blockNumber = block.number;\n            }\n        });\n    }, POLL_INTERVAL);\n};\n\nconst getCelrAllowance = (account, contracts) => {\n    const { ERC20ExampleToken, LiBA } = contracts;\n    ERC20ExampleToken.methods.allowance.cacheCall(account, LiBA.address);\n};\n","import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { drizzleConnect } from 'drizzle-react';\nimport { withRouter, Link } from 'dva/router';\nimport { Card, Layout, Menu, Button } from 'antd';\nimport { AccountData } from 'drizzle-react-components';\n\nimport ApproveCELRForm from './components/approve-celr';\nimport AccountInfo from './components/account-info';\nimport { subscribeEvent, subscribeChainInfo } from './utils/subscribe';\nimport { getNetworkConfig } from './utils/network';\n\nimport './App.css';\n\nconst { Sider, Content, Footer } = Layout;\n\nclass App extends React.Component {\n    constructor(props, context) {\n        super(props);\n\n        this.state = { isModalVisible: false };\n        this.contracts = context.drizzle.contracts;\n        this.web3 = context.drizzle.web3;\n    }\n\n    componentWillMount() {\n        const { accounts, dispatch } = this.props;\n        subscribeEvent(accounts[0], this.contracts, dispatch);\n        subscribeChainInfo(this.web3, dispatch);\n\n        dispatch({\n            type: 'network/save',\n            payload: getNetworkConfig(this.web3.currentProvider.networkVersion)\n        });\n    }\n\n    toggleModal = () => {\n        this.setState(prevState => ({\n            isModalVisible: !prevState.isModalVisible\n        }));\n    };\n\n    render() {\n        const { isModalVisible } = this.state;\n        const { children, location, CelrToken } = this.props;\n        const { pathname } = location;\n        const celerAllowance = _.values(CelrToken.allowance)[0] || {};\n\n        return (\n            <Layout>\n                <Sider>\n                    <AccountInfo celrValue={celerAllowance.value} />\n                    <Menu\n                        theme=\"dark\"\n                        mode=\"inline\"\n                        selectedKeys={[pathname.slice(1)]}\n                    >\n                        <Menu.Item key=\"polc\">\n                            <Link to=\"/polc\">Fund</Link>\n                        </Menu.Item>\n                        <Menu.Item key=\"liba\">\n                            <Link to=\"/liba\">Auctions</Link>\n                        </Menu.Item>\n                        <Menu.Item className=\"approve-celr\">\n                            <Button\n                                type=\"primary\"\n                                block\n                                onClick={this.toggleModal}\n                            >\n                                Approve CELR\n                            </Button>\n                        </Menu.Item>\n                    </Menu>\n                </Sider>\n                <Layout>\n                    <Content>\n                        {children}\n                        <ApproveCELRForm\n                            visible={isModalVisible}\n                            onClose={this.toggleModal}\n                        />\n                    </Content>\n                    <Footer style={{ textAlign: 'center' }}>\n                        cEconomy ©2019 Created by Celer Network\n                    </Footer>\n                </Layout>\n            </Layout>\n        );\n    }\n}\n\nApp.propTypes = {\n    children: PropTypes.element.isRequired,\n    location: PropTypes.object.isRequired\n};\n\nApp.contextTypes = {\n    drizzle: PropTypes.object\n};\n\nfunction mapStateToProps(state) {\n    const { accounts, contracts } = state;\n\n    return {\n        accounts,\n        CelrToken: contracts.ERC20ExampleToken\n    };\n}\n\nexport default withRouter(drizzleConnect(App, mapStateToProps));\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter, routerRedux, Switch, Route, Redirect } from 'dva/router';\nimport Dynamic from 'dva/dynamic';\nimport { DrizzleProvider } from 'drizzle-react';\nimport { LoadingContainer } from 'drizzle-react-components';\nimport { Spin } from 'antd';\n\nimport App from './App';\nimport contractOptions from './utils/contracts';\n\nconst { ConnectedRouter } = routerRedux;\nconst LoadingWrapper = withRouter(LoadingContainer);\n\nconst redirectToHome = () => <Redirect to=\"/polc\" />;\n\nfunction RouterConfig({ history, app }) {\n    const PoLC = Dynamic({\n        app,\n        component: () => import('./routes/polc')\n    });\n    const LiBA = Dynamic({\n        app,\n        component: () => import('./routes/liba')\n    });\n    const Auction = Dynamic({\n        app,\n        component: () => import('./routes/auction')\n    });\n\n    return (\n        <DrizzleProvider options={contractOptions} store={app._store}>\n            <ConnectedRouter history={history}>\n                <LoadingWrapper loadingComp={Spin}>\n                    <App>\n                        <Switch>\n                            <Route exact path=\"/polc\" component={PoLC} />\n                            <Route exact path=\"/liba\" component={LiBA} />\n                            <Route\n                                exact\n                                path=\"/auction/:id\"\n                                component={Auction}\n                            />\n                            <Route exact path=\"/\" render={redirectToHome} />\n                        </Switch>\n                    </App>\n                </LoadingWrapper>\n            </ConnectedRouter>\n        </DrizzleProvider>\n    );\n}\n\nRouterConfig.propTypes = {\n    history: PropTypes.object.isRequired\n};\n\nexport default RouterConfig;\n","export default {\n    namespace: 'PoLC',\n\n    state: {},\n\n    effects: {},\n\n    reducers: {\n        save(state, action) {\n            return { ...state, ...action.payload };\n        }\n    }\n};\n","export default {\n    namespace: 'LiBA',\n\n    state: {},\n\n    effects: {},\n\n    reducers: {\n        addBid(state, action) {\n            return {\n                ...state,\n                bids: [...(state.bids || []), action.payload.auctionId]\n            };\n        },\n\n        save(state, action) {\n            return { ...state, ...action.payload };\n        }\n    }\n};\n","export default {\n    namespace: 'network',\n\n    state: {},\n\n    effects: {},\n\n    reducers: {\n        save(state, action) {\n            return { ...state, ...action.payload };\n        }\n    }\n};\n","import dva from 'dva';\nimport createLoading from 'dva-loading';\nimport { all, fork } from 'redux-saga/effects';\nimport {\n    generateContractsInitialState,\n    drizzleReducers,\n    drizzleSagas\n} from 'drizzle';\nimport { message } from 'antd';\n\nimport contractOptions from './utils/contracts';\nimport { checkNetworkCompatbility } from './utils/network';\nimport PoLCModel from './models/polc';\nimport LiBAModel from './models/liba';\nimport NetworkModel from './models/network';\n\nfunction*rootSaga() {\n    yield all(drizzleSagas.map(saga => fork(saga)));\n}\n\ncheckNetworkCompatbility();\n\n// 1. Initialize\nconst app = dva({\n    initialState: {\n        ...generateContractsInitialState(contractOptions)\n    },\n    extraReducers: {\n        ...drizzleReducers\n    },\n    onError(err, dispatch) {\n        if (err.resp) {\n            message.error(err.resp.msg);\n        } else if (err.srv) {\n            message.error(err.srv.msg);\n        } else {\n            message.error(err);\n        }\n    }\n});\n\n// 2. Plugins\napp.use(\n    createLoading({\n        namespace: 'loading'\n        // effects: enable effects level loading state\n    })\n);\n\n// 3. Model\n// Moved to router.js\napp.model(PoLCModel);\napp.model(LiBAModel);\napp.model(NetworkModel);\n\n// 4. Router\napp.router(require('./router.js').default);\n\n// 5. Start\napp.start('#root');\napp._store.runSaga(rootSaga);\n"],"sourceRoot":""}