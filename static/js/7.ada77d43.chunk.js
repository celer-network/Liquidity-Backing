(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{795:function(e,t,a){"use strict";a.d(t,"c",function(){return o}),a.d(t,"b",function(){return u}),a.d(t,"a",function(){return c});var n=a(62),r=a.n(n),i=a(183),l=a.n(i),o=(a(145),function(e,t){var a=r.a.find(e,function(e){return e.address===t});return a?a.symbol:""}),u=function(e,t){return r.a.toNumber(e)<1e5?"".concat(e," wei"):"".concat(l.a.utils.fromWei(e)," ").concat(t)},c=function(e){return u(e,"CELR")}},799:function(e,t,a){"use strict";a.d(t,"a",function(){return u}),a.d(t,"g",function(){return c}),a.d(t,"c",function(){return s}),a.d(t,"b",function(){return d}),a.d(t,"e",function(){return b}),a.d(t,"f",function(){return f}),a.d(t,"d",function(){return m}),a.d(t,"i",function(){return p}),a.d(t,"j",function(){return h}),a.d(t,"h",function(){return v});var n=a(238),r=a(62),i=a.n(r),l=a(183),o=a.n(l).a.utils.BN,u="Bid",c="Reveal",s="Claim",d="Challenge",b="Finalize",f="Finalized",m="Expired",p=function(e,t,a){var n=i.a.get(e,"block.number"),r=i.a.find(a,function(e){return e.args[0]===t.args[0]}),l=i.a.get(r,"value",{}),o=l.bidEnd,p=l.revealEnd,h=l.claimEnd,v=l.challengeEnd,O=l.finalizeEnd,g=l.finalized;return n<i.a.toNumber(o)?u:n<i.a.toNumber(p)?c:n<i.a.toNumber(h)?s:n<i.a.toNumber(v)?d:n<i.a.toNumber(O)?b:g?f:m},h=function(e,t){var a,r=[],l=e.value.value;return t.sort(O),i.a.forEach(t,function(e){var t=Object(n.a)(e.args,1)[0],i=e.value.value;if(l<0)return a=t,!1;l-=i,r.push(t)}),a||(a=i.a.last(r)),{winners:r,topLoser:a}},v=function(e,t){var a=new o(0);return i.a.forEach(e,function(e){var r=Object(n.a)(e.args,1)[0],l=e.value,u=l.value,c=l.rate;i.a.includes(t,r)&&(a=a.add(new o(u).muln(100+parseInt(c)).divn(100)),console.log(c,a.toString()))}),a},O=function(e,t){var a=e.value,n=a.rate1,r=a.celerValue1,i=t.value,l=i.rate2,o=i.celerValue2;return n!==l?n-l:o-r}},876:function(e,t,a){"use strict";a.r(t);var n=a(43),r=a(71),i=a(72),l=a(74),o=a(73),u=a(75),c=a(1),s=a.n(c),d=a(0),b=a.n(d),f=a(62),m=a.n(f),p=a(115),h=a(46),v=a(874),O=a(794),g=a(11),j=a(113),k=a(55),E=a(870),w=a(68),A=a(183),C=a.n(A),T=a(784),z=a(236),D=a(235),V=a(795),y=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).handleValueChange=function(e){return n.setState(e)},n.handleInitAuction=function(){var e=n.props.onClose;n.form.current.validateFields(function(t,a){if(!t){var r=a.token,i=a.bidDuration,l=a.revealDuration,o=a.claimDuration,u=a.challengeDuration,c=a.finalizeDuration,s=a.value,d=a.duration,b=a.maxRate,f=a.minValue,m=a.collateralAddress,p=a.collateralValue,h=void 0===p?0:p;n.contracts.LiBA.methods.initAuction.cacheSend(r,i,l,o,u,c,C.a.utils.toWei(s.toString(),"ether"),d,b,C.a.utils.toWei(f.toString(),"ether"),m,C.a.utils.toWei(h.toString(),"ether")),e()}})},n.state={},n.form=s.a.createRef(),n.contracts=a.drizzle.contracts,n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.network,r=e.onClose,i=a.supportedTokens.map(function(e){return[e.address,"".concat(e.symbol," (").concat(e.address,")")]}),l=Object(V.c)(a.supportedTokens,this.state.token),o=[{name:"token",field:"select",fieldOptions:{options:i,placeholder:"Token type to borrow"},rules:[{message:"Please select a token!",required:!0}]},{name:"value",field:"number",fieldOptions:Object(n.a)({},Object(D.c)(l),{placeholder:"The amount of token to borrow"}),rules:[Object(D.e)(0),{message:"Please enter a value!",required:!0}]},{name:"duration",field:"number",fieldOptions:Object(n.a)({},D.d,{placeholder:"The duration of the borrowing"}),rules:[Object(D.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"maxRate",label:"Max Rate",field:"number",fieldOptions:Object(n.a)({},D.f,{step:.001,precision:3,placeholder:"The maximum interest rate"}),rules:[Object(D.e)(0),{message:"Please enter a max rate!",required:!0}]},{name:"minValue",label:"Min Value",field:"number",fieldOptions:Object(n.a)({},Object(D.c)(l),{placeholder:"The minimum value for bidding"}),rules:[Object(D.e)(0),{message:"Please enter a min value!",required:!0}]},{name:"collateralAddress",label:"Collateral Address",fieldOptions:{placeholder:"The address of collateral token"}},{name:"collateralValue",label:"Collateral Value",field:"number",fieldOptions:{placeholder:"The amount of collateral token"},rules:[Object(D.e)(0)]},{name:"bidDuration",label:"Bid Duration",field:"number",fieldOptions:Object(n.a)({},D.a,{placeholder:"The duration of bidding period"}),rules:[Object(D.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"revealDuration",label:"Reveal Duration",field:"number",fieldOptions:Object(n.a)({},D.a,{placeholder:"The duration of revealing period"}),rules:[Object(D.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"claimDuration",label:"Claim Duration",field:"number",fieldOptions:Object(n.a)({},D.a,{placeholder:"The duration of claiming period"}),rules:[Object(D.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"challengeDuration",label:"Challenge Duration",field:"number",fieldOptions:Object(n.a)({},D.a,{placeholder:"The duration of challenge period"}),rules:[Object(D.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"finalizeDuration",label:"Finalize Duration",field:"number",fieldOptions:Object(n.a)({},D.a,{placeholder:"The duration of finalize period"}),rules:[Object(D.e)(0),{message:"Please enter a duration!",required:!0}]}];return s.a.createElement(T.a,{title:"Launch Auction",visible:t,onOk:this.handleInitAuction,onCancel:r},s.a.createElement(z.a,{ref:this.form,items:o,onValuesChange:this.handleValueChange}))}}]),t}(s.a.Component);y.contextTypes={drizzle:b.a.object};var L=y,P=a(799),B=[{key:"all",tab:"All"},{key:"own",tab:"Own"},{key:"bid",tab:"Bid"}],q=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(l.a)(this,Object(o.a)(t).call(this,e))).onTabChange=function(e){n.setState({tab:e})},n.toggleModal=function(){n.setState(function(e){return{isModalVisible:!e.isModalVisible}})},n.renderAuction=function(e){var t=n.props,a=t.network,r=t.LiBA,i=e.value,l=i.asker,o=i.value,u=i.duration,c=i.tokenAddress,d=Object(V.c)(a.supportedTokens,c);return s.a.createElement(v.a.Item,null,s.a.createElement(O.a,{actions:[s.a.createElement(h.Link,{to:"/auction/".concat(e.args[0])},s.a.createElement(g.a,{type:"eye",title:"View Detail"}))]},s.a.createElement(j.a,null,s.a.createElement(k.a,{span:12},s.a.createElement(E.a,{title:"Asker",value:l})),s.a.createElement(k.a,{span:12},s.a.createElement(E.a,{title:"Period",value:Object(P.i)(a,e,r.getAuctionPeriod)})),s.a.createElement(k.a,{span:12},s.a.createElement(E.a,{title:"Value",value:Object(V.b)(o,d)})),s.a.createElement(k.a,{span:12},s.a.createElement(E.a,{title:"Duration",value:"".concat(u," Day")})))))},n.renderAuctions=function(){var e=n.props,t=e.accounts,a=e.LiBA,r=n.state.tab,i=m.a.values(a.getAuction);return"own"===r&&(i=m.a.filter(i,function(e){return e.value.asker===t[0]})),"bid"===r&&(i=m.a.filter(i,function(e){return m.a.includes(a.bids,e.args[0])})),s.a.createElement(v.a,{grid:{gutter:16,column:3},dataSource:i,renderItem:n.renderAuction})},n.state={isModalVisible:!1,tab:"all"},n.contracts=a.drizzle.contracts,n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isModalVisible,a=e.tab,n=this.props.network;return s.a.createElement(O.a,{tabList:B,title:"LiBA",activeTabKey:a,onTabChange:this.onTabChange,extra:s.a.createElement(w.a,{type:"primary",onClick:this.toggleModal},"Launch auction")},this.renderAuctions(),s.a.createElement(L,{network:n,visible:t,onClose:this.toggleModal}))}}]),t}(s.a.Component);q.contextTypes={drizzle:b.a.object};t.default=Object(p.drizzleConnect)(q,function(e){var t=e.contracts,a=e.accounts,r=e.LiBA;return{accounts:a,network:e.network,LiBA:Object(n.a)({},r,t.LiBA)}})}}]);
//# sourceMappingURL=7.ada77d43.chunk.js.map