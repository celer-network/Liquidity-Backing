(this["webpackJsonptruffle-react-redux-dapp"]=this["webpackJsonptruffle-react-redux-dapp"]||[]).push([[7],{826:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"a",(function(){return c}));var n=a(62),r=a.n(n),i=a(188),o=a.n(i),l=(a(146),function(e,t){var a=r.a.find(e,(function(e){return e.address===t}));return a?a.symbol:""}),u=function(e,t){return r.a.toNumber(e)<1e5?"".concat(e," wei"):"".concat(o.a.utils.fromWei(e)," ").concat(t)},c=function(e){return u(e,"CELR")}},830:function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"g",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return d})),a.d(t,"e",(function(){return f})),a.d(t,"f",(function(){return b})),a.d(t,"d",(function(){return p})),a.d(t,"i",(function(){return m})),a.d(t,"j",(function(){return h})),a.d(t,"h",(function(){return O}));var n=a(249),r=a(62),i=a.n(r),o=a(188),l=a.n(o).a.utils.BN,u="Bid",c="Reveal",s="Claim",d="Challenge",f="Finalize",b="Finalized",p="Expired",m=function(e,t,a){var n=i.a.get(e,"block.number"),r=i.a.find(a,(function(e){return e.args[0]===t.args[0]})),o=i.a.get(r,"value",{}),l=o.bidEnd,m=o.revealEnd,h=o.claimEnd,O=o.challengeEnd,v=o.finalizeEnd,g=o.finalized;return n<i.a.toNumber(l)?u:n<i.a.toNumber(m)?c:n<i.a.toNumber(h)?s:n<i.a.toNumber(O)?d:n<i.a.toNumber(v)?f:g?b:p},h=function(e,t){var a,r=[],o=e.value.value;return t.sort(v),i.a.forEach(t,(function(e){var t=Object(n.a)(e.args,1)[0],i=e.value.value;if(o<0)return a=t,!1;o-=i,r.push(t)})),a||(a=i.a.last(r)),{winners:r,topLoser:a}},O=function(e,t){var a=new l(0);return i.a.forEach(e,(function(e){var r=Object(n.a)(e.args,1)[0],o=e.value,u=o.value,c=o.rate;i.a.includes(t,r)&&(a=a.add(new l(u).muln(100+parseInt(c)).divn(100)),console.log(c,a.toString()))})),a},v=function(e,t){var a=e.value,n=a.rate1,r=a.celerValue1,i=t.value,o=i.rate2,l=i.celerValue2;return n!==o?n-o:l-r}},905:function(e,t,a){"use strict";a.r(t);var n=a(46),r=a(71),i=a(72),o=a(74),l=a(73),u=a(75),c=a(0),s=a.n(c),d=a(1),f=a.n(d),b=a(62),p=a.n(b),m=a(114),h=a(44),O=a(904),v=a(825),g=a(11),j=a(111),y=a(55),k=a(901),E=a(79),w=a(188),P=a.n(w),D=a(815),A=a(247),C=a(246),T=a(826);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).handleValueChange=function(e){return n.setState(e)},n.handleInitAuction=function(){var e=n.props.onClose;n.form.current.validateFields((function(t,a){if(!t){var r=a.token,i=a.bidDuration,o=a.revealDuration,l=a.claimDuration,u=a.challengeDuration,c=a.finalizeDuration,s=a.value,d=a.duration,f=a.maxRate,b=a.minValue,p=a.collateralAddress,m=a.collateralValue,h=void 0===m?0:m;n.contracts.LiBA.methods.initAuction.cacheSend(r,i,o,l,u,c,P.a.utils.toWei(s.toString(),"ether"),d,f,P.a.utils.toWei(b.toString(),"ether"),p,P.a.utils.toWei(h.toString(),"ether")),e()}}))},n.state={},n.form=s.a.createRef(),n.contracts=a.drizzle.contracts,n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.network,n=e.onClose,r=a.supportedTokens.map((function(e){return[e.address,"".concat(e.symbol," (").concat(e.address,")")]})),i=Object(T.c)(a.supportedTokens,this.state.token),o=[{name:"token",field:"select",fieldOptions:{options:r,placeholder:"Token type to borrow"},rules:[{message:"Please select a token!",required:!0}]},{name:"value",field:"number",fieldOptions:V({},Object(C.c)(i),{placeholder:"The amount of token to borrow"}),rules:[Object(C.e)(0),{message:"Please enter a value!",required:!0}]},{name:"duration",field:"number",fieldOptions:V({},C.d,{placeholder:"The duration of the borrowing"}),rules:[Object(C.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"maxRate",label:"Max Rate",field:"number",fieldOptions:V({},C.f,{step:.001,precision:3,placeholder:"The maximum interest rate"}),rules:[Object(C.e)(0),{message:"Please enter a max rate!",required:!0}]},{name:"minValue",label:"Min Value",field:"number",fieldOptions:V({},Object(C.c)(i),{placeholder:"The minimum value for bidding"}),rules:[Object(C.e)(0),{message:"Please enter a min value!",required:!0}]},{name:"collateralAddress",label:"Collateral Address",fieldOptions:{placeholder:"The address of collateral token"}},{name:"collateralValue",label:"Collateral Value",field:"number",fieldOptions:{placeholder:"The amount of collateral token"},rules:[Object(C.e)(0)]},{name:"bidDuration",label:"Bid Duration",field:"number",fieldOptions:V({},C.a,{placeholder:"The duration of bidding period"}),rules:[Object(C.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"revealDuration",label:"Reveal Duration",field:"number",fieldOptions:V({},C.a,{placeholder:"The duration of revealing period"}),rules:[Object(C.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"claimDuration",label:"Claim Duration",field:"number",fieldOptions:V({},C.a,{placeholder:"The duration of claiming period"}),rules:[Object(C.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"challengeDuration",label:"Challenge Duration",field:"number",fieldOptions:V({},C.a,{placeholder:"The duration of challenge period"}),rules:[Object(C.e)(0),{message:"Please enter a duration!",required:!0}]},{name:"finalizeDuration",label:"Finalize Duration",field:"number",fieldOptions:V({},C.a,{placeholder:"The duration of finalize period"}),rules:[Object(C.e)(0),{message:"Please enter a duration!",required:!0}]}];return s.a.createElement(D.a,{title:"Launch Auction",visible:t,onOk:this.handleInitAuction,onCancel:n},s.a.createElement(A.a,{ref:this.form,items:o,onValuesChange:this.handleValueChange}))}}]),t}(s.a.Component);L.contextTypes={drizzle:f.a.object};var S=L,x=a(830);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M=[{key:"all",tab:"All"},{key:"own",tab:"Own"},{key:"bid",tab:"Bid"}],N=function(e){function t(e,a){var n;return Object(r.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).onTabChange=function(e){n.setState({tab:e})},n.toggleModal=function(){n.setState((function(e){return{isModalVisible:!e.isModalVisible}}))},n.renderAuction=function(e){var t=n.props,a=t.network,r=t.LiBA,i=e.value,o=i.asker,l=i.value,u=i.duration,c=i.tokenAddress,d=Object(T.c)(a.supportedTokens,c);return s.a.createElement(O.a.Item,null,s.a.createElement(v.a,{actions:[s.a.createElement(h.Link,{to:"/auction/".concat(e.args[0])},s.a.createElement(g.a,{type:"eye",title:"View Detail"}))]},s.a.createElement(j.a,null,s.a.createElement(y.a,{span:12},s.a.createElement(k.a,{title:"Asker",value:o})),s.a.createElement(y.a,{span:12},s.a.createElement(k.a,{title:"Period",value:Object(x.i)(a,e,r.getAuctionPeriod)})),s.a.createElement(y.a,{span:12},s.a.createElement(k.a,{title:"Value",value:Object(T.b)(l,d)})),s.a.createElement(y.a,{span:12},s.a.createElement(k.a,{title:"Duration",value:"".concat(u," Day")})))))},n.renderAuctions=function(){var e=n.props,t=e.accounts,a=e.LiBA,r=n.state.tab,i=p.a.values(a.getAuction);return"own"===r&&(i=p.a.filter(i,(function(e){return e.value.asker===t[0]}))),"bid"===r&&(i=p.a.filter(i,(function(e){return p.a.includes(a.bids,e.args[0])}))),s.a.createElement(O.a,{grid:{gutter:16,column:3},dataSource:i,renderItem:n.renderAuction})},n.state={isModalVisible:!1,tab:"all"},n.contracts=a.drizzle.contracts,n}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isModalVisible,a=e.tab,n=this.props.network;return s.a.createElement(v.a,{tabList:M,title:"LiBA",activeTabKey:a,onTabChange:this.onTabChange,extra:s.a.createElement(E.a,{type:"primary",onClick:this.toggleModal},"Launch auction")},this.renderAuctions(),s.a.createElement(S,{network:n,visible:t,onClose:this.toggleModal}))}}]),t}(s.a.Component);N.contextTypes={drizzle:f.a.object};t.default=Object(m.drizzleConnect)(N,(function(e){var t=e.contracts,a=e.accounts,n=e.LiBA;return{accounts:a,network:e.network,LiBA:q({},n,{},t.LiBA)}}))}}]);
//# sourceMappingURL=7.dcbb14a9.chunk.js.map